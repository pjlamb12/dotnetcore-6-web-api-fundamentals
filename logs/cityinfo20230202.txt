2023-02-02 08:37:10.437 -07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-02-02 08:37:10.599 -07:00 [DBG] Hosting starting
2023-02-02 08:37:10.795 -07:00 [DBG] Using development certificate: CN=localhost (Thumbprint: DF901BD9753E125923C6593F672F66E5F7B6BAB5)
2023-02-02 08:37:10.853 -07:00 [INF] Now listening on: https://localhost:7151
2023-02-02 08:37:10.853 -07:00 [INF] Now listening on: http://localhost:5197
2023-02-02 08:37:10.853 -07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-02-02 08:37:10.854 -07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-02-02 08:37:10.854 -07:00 [INF] Hosting environment: Development
2023-02-02 08:37:10.854 -07:00 [INF] Content root path: /Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/
2023-02-02 08:37:10.854 -07:00 [DBG] Hosting started
2023-02-02 08:37:19.955 -07:00 [DBG] Connection id "0HMO56DFH3HJH" accepted.
2023-02-02 08:37:19.956 -07:00 [DBG] Connection id "0HMO56DFH3HJH" started.
2023-02-02 08:37:20.032 -07:00 [DBG] Connection 0HMO56DFH3HJH established using the following protocol: "Tls12"
2023-02-02 08:37:20.074 -07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7151/api/cities/3/pointsofinterest application/json 117
2023-02-02 08:37:20.078 -07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-02-02 08:37:20.125 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2023-02-02 08:37:20.128 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2023-02-02 08:37:20.128 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-02-02 08:37:20.139 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:37:20.142 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-02-02 08:37:20.175 -07:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-02-02 08:37:20.176 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 08:37:20.176 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 08:37:20.177 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 08:37:20.177 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 08:37:20.177 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 08:37:20.181 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 08:37:20.253 -07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-02-02 08:37:20.340 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 08:37:20.348 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-02-02 08:37:20.351 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-02-02 08:37:20.353 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:37:20.353 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:37:20.353 -07:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-02-02 08:37:20.361 -07:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:37:20.361 -07:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-02-02 08:37:20.363 -07:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2023-02-02 08:37:20.363 -07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-02-02 08:37:20.368 -07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-02-02 08:37:20.379 -07:00 [DBG] Connection id "0HMO56DFH3HJH", Request id "0HMO56DFH3HJH:00000002": started reading request body.
2023-02-02 08:37:20.380 -07:00 [DBG] Connection id "0HMO56DFH3HJH", Request id "0HMO56DFH3HJH:00000002": done reading request body.
2023-02-02 08:37:20.449 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-02-02 08:37:20.449 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-02-02 08:37:20.449 -07:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-02-02 08:37:20.457 -07:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-02-02 08:37:20.838 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 08:37:20.857 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-02-02 08:37:20.944 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 08:37:20.964 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:37:21.013 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (48ms).
2023-02-02 08:37:21.017 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:37:21.027 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:37:21.035 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 08:37:21.052 -07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 08:37:21.056 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:37:21.057 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:37:21.060 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:37:21.070 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-02-02 08:37:21.098 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 08:37:21.102 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:37:21.102 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:37:21.102 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:37:21.102 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:37:21.102 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-02-02 08:37:21.102 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-02-02 08:37:21.109 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:37:21.119 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:37:21.119 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:37:21.119 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:37:21.121 -07:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-02-02 08:37:21.122 -07:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-02-02 08:37:21.132 -07:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:37:21.146 -07:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:37:21.159 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:37:21.160 -07:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-02-02 08:37:21.169 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:37:21.169 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:37:21.170 -07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-02-02 08:37:21.172 -07:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-02-02 08:37:21.198 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:37:21.198 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:37:21.198 -07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-02-02 08:37:21.200 -07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-02-02 08:37:21.208 -07:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-02-02 08:37:21.212 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:37:21.213 -07:00 [DBG] Committing transaction.
2023-02-02 08:37:21.214 -07:00 [DBG] Committed transaction.
2023-02-02 08:37:21.215 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:37:21.215 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:37:21.216 -07:00 [DBG] Disposing transaction.
2023-02-02 08:37:21.221 -07:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:37:21.221 -07:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-02-02 08:37:21.229 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 08:37:21.232 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 08:37:21.233 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 08:37:21.233 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 08:37:21.237 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 08:37:21.237 -07:00 [INF] Executing CreatedAtRouteResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2023-02-02 08:37:21.252 -07:00 [DBG] Found the endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-02-02 08:37:21.268 -07:00 [DBG] Successfully processed template api/cities/{cityId}/pointsofinterest/{pointofinterestid} for CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) resulting in /api/cities/3/pointsofinterest/7 and 
2023-02-02 08:37:21.268 -07:00 [DBG] Link generation succeeded for endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] with result /api/cities/3/pointsofinterest/7
2023-02-02 08:37:21.316 -07:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 1136.5658ms
2023-02-02 08:37:21.319 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-02-02 08:37:21.319 -07:00 [DBG] Connection id "0HMO56DFH3HJH" completed keep alive response.
2023-02-02 08:37:21.322 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 08:37:21.326 -07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7151/api/cities/3/pointsofinterest application/json 117 - 201 111 application/json;+charset=utf-8 1252.7717ms
2023-02-02 08:37:30.991 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities - -
2023-02-02 08:37:30.992 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-02-02 08:37:30.992 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-02-02 08:37:30.992 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 08:37:31.015 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:37:31.015 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 08:37:31.016 -07:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 08:37:31.016 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 08:37:31.016 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 08:37:31.016 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 08:37:31.016 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 08:37:31.016 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 08:37:31.016 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:37:31.017 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:37:31.020 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 08:37:31.025 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)'
2023-02-02 08:37:31.029 -07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-02-02 08:37:31.030 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:37:31.030 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:37:31.030 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:37:31.030 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:37:31.030 -07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2023-02-02 08:37:31.031 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2023-02-02 08:37:31.031 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:37:31.031 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:37:31.031 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:37:31.031 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:37:31.031 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:37:31.031 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:37:31.039 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 08:37:31.039 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 08:37:31.039 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 08:37:31.039 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 08:37:31.039 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 08:37:31.039 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 08:37:31.043 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 26.7526ms
2023-02-02 08:37:31.043 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 08:37:31.043 -07:00 [DBG] Connection id "0HMO56DFH3HJH" completed keep alive response.
2023-02-02 08:37:31.043 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 08:37:31.043 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities - - - 200 247 application/json;+charset=utf-8 52.2494ms
2023-02-02 08:37:35.625 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities/3?includePointsOfInterest=true - -
2023-02-02 08:37:35.627 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3'
2023-02-02 08:37:35.627 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/3'
2023-02-02 08:37:35.628 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:37:35.632 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:37:35.633 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:37:35.649 -07:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 08:37:35.650 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 08:37:35.650 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 08:37:35.650 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 08:37:35.650 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 08:37:35.650 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 08:37:35.650 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:37:35.652 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:37:35.657 -07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-02-02 08:37:35.657 -07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-02-02 08:37:35.658 -07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-02-02 08:37:35.658 -07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-02-02 08:37:35.658 -07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-02-02 08:37:35.658 -07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-02-02 08:37:35.658 -07:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-02-02 08:37:35.658 -07:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2023-02-02 08:37:35.660 -07:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:37:35.660 -07:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:37:35.660 -07:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-02-02 08:37:35.660 -07:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:37:35.688 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 08:37:35.691 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.PointsOfInterest)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-02-02 08:37:35.698 -07:00 [DBG] Including navigation: 'City.PointsOfInterest'.
2023-02-02 08:37:35.742 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 08:37:35.742 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:37:35.743 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:37:35.743 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:37:35.743 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:37:35.743 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-02-02 08:37:35.743 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-02-02 08:37:35.743 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:37:35.745 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:37:35.746 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:37:35.746 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:37:35.746 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:37:35.746 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:37:35.746 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:37:35.748 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 08:37:35.748 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 08:37:35.748 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 08:37:35.748 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 08:37:35.748 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 08:37:35.748 -07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityDto'.
2023-02-02 08:37:35.750 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 99.948ms
2023-02-02 08:37:35.750 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:37:35.750 -07:00 [DBG] Connection id "0HMO56DFH3HJH" completed keep alive response.
2023-02-02 08:37:35.750 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 08:37:35.750 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities/3?includePointsOfInterest=true - - - 200 438 application/json;+charset=utf-8 124.4991ms
2023-02-02 08:43:19.617 -07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-02-02 08:43:19.769 -07:00 [DBG] Hosting starting
2023-02-02 08:43:19.921 -07:00 [DBG] Using development certificate: CN=localhost (Thumbprint: DF901BD9753E125923C6593F672F66E5F7B6BAB5)
2023-02-02 08:43:19.948 -07:00 [INF] Now listening on: https://localhost:7151
2023-02-02 08:43:19.948 -07:00 [INF] Now listening on: http://localhost:5197
2023-02-02 08:43:19.948 -07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-02-02 08:43:19.948 -07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-02-02 08:43:19.948 -07:00 [INF] Hosting environment: Development
2023-02-02 08:43:19.948 -07:00 [INF] Content root path: /Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/
2023-02-02 08:43:19.949 -07:00 [DBG] Hosting started
2023-02-02 08:43:37.899 -07:00 [DBG] Connection id "0HMO56H05AQPJ" accepted.
2023-02-02 08:43:37.900 -07:00 [DBG] Connection id "0HMO56H05AQPJ" started.
2023-02-02 08:43:37.989 -07:00 [DBG] Connection 0HMO56H05AQPJ established using the following protocol: "Tls12"
2023-02-02 08:43:38.031 -07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7151/api/cities/1/pointsofinterest/1 application/json 122
2023-02-02 08:43:38.035 -07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-02-02 08:43:38.081 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2023-02-02 08:43:38.084 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointofinterestId}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2023-02-02 08:43:38.084 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)'
2023-02-02 08:43:38.095 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:43:38.099 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)'
2023-02-02 08:43:38.132 -07:00 [INF] Route matched with {action = "UpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdatePointOfInterest(Int32, Int32, CityInfo.API.Models.PointOfInterestForUpdateDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-02-02 08:43:38.133 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 08:43:38.133 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 08:43:38.135 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 08:43:38.135 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 08:43:38.135 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 08:43:38.138 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 08:43:38.194 -07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-02-02 08:43:38.276 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 08:43:38.285 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-02-02 08:43:38.288 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-02-02 08:43:38.290 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:43:38.290 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:43:38.290 -07:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-02-02 08:43:38.298 -07:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:43:38.298 -07:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-02-02 08:43:38.298 -07:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-02-02 08:43:38.298 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-02-02 08:43:38.298 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-02-02 08:43:38.298 -07:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-02-02 08:43:38.298 -07:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-02-02 08:43:38.298 -07:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto' ...
2023-02-02 08:43:38.300 -07:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto' using the name '' in request data ...
2023-02-02 08:43:38.301 -07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-02-02 08:43:38.305 -07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-02-02 08:43:38.317 -07:00 [DBG] Connection id "0HMO56H05AQPJ", Request id "0HMO56H05AQPJ:00000002": started reading request body.
2023-02-02 08:43:38.318 -07:00 [DBG] Connection id "0HMO56H05AQPJ", Request id "0HMO56H05AQPJ:00000002": done reading request body.
2023-02-02 08:43:38.377 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-02-02 08:43:38.377 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-02-02 08:43:38.377 -07:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto' ...
2023-02-02 08:43:38.385 -07:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-02-02 08:43:38.779 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 08:43:38.799 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-02-02 08:43:38.882 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 08:43:38.899 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:43:38.941 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (39ms).
2023-02-02 08:43:38.944 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:43:38.953 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:43:38.960 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 08:43:38.975 -07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 08:43:38.979 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:43:38.980 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:43:38.982 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:43:38.985 -07:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0 && p.Id == __pointOfInterestId_1)
    .FirstOrDefault()'
2023-02-02 08:43:39.011 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityId_0) && (p.Id == @__pointOfInterestId_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 08:43:39.016 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:43:39.016 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:43:39.016 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:43:39.016 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:43:39.016 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-02-02 08:43:39.017 -07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-02-02 08:43:39.022 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:43:39.032 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:43:39.032 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:43:39.032 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:43:39.039 -07:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-02-02 08:43:39.040 -07:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-02-02 08:43:39.044 -07:00 [DBG] The unchanged property 'PointOfInterest.Description' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-02-02 08:43:39.048 -07:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:43:39.048 -07:00 [DBG] The unchanged property 'PointOfInterest.Name' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-02-02 08:43:39.049 -07:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-02-02 08:43:39.056 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:43:39.056 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:43:39.057 -07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-02-02 08:43:39.058 -07:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-02-02 08:43:39.080 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:43:39.080 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:43:39.080 -07:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 59), @p1='?' (Size = 22)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointsOfInterest" SET "Description" = @p0, "Name" = @p1
WHERE "Id" = @p2;
SELECT changes();
2023-02-02 08:43:39.081 -07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 59), @p1='?' (Size = 22)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointsOfInterest" SET "Description" = @p0, "Name" = @p1
WHERE "Id" = @p2;
SELECT changes();
2023-02-02 08:43:39.084 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:43:39.085 -07:00 [DBG] Committing transaction.
2023-02-02 08:43:39.086 -07:00 [DBG] Committed transaction.
2023-02-02 08:43:39.087 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:43:39.087 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:43:39.088 -07:00 [DBG] Disposing transaction.
2023-02-02 08:43:39.092 -07:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:43:39.092 -07:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-02-02 08:43:39.095 -07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2023-02-02 08:43:39.098 -07:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API) in 961.2583ms
2023-02-02 08:43:39.100 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)'
2023-02-02 08:43:39.112 -07:00 [DBG] Connection id "0HMO56H05AQPJ" completed keep alive response.
2023-02-02 08:43:39.114 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 08:43:39.117 -07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7151/api/cities/1/pointsofinterest/1 application/json 122 - 204 - - 1087.9496ms
2023-02-02 08:43:43.145 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities - -
2023-02-02 08:43:43.146 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-02-02 08:43:43.146 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-02-02 08:43:43.146 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 08:43:43.170 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:43:43.170 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 08:43:43.172 -07:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 08:43:43.172 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 08:43:43.172 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 08:43:43.172 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 08:43:43.172 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 08:43:43.172 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 08:43:43.172 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:43:43.172 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:43:43.174 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 08:43:43.177 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)'
2023-02-02 08:43:43.179 -07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-02-02 08:43:43.180 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:43:43.180 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:43:43.180 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:43:43.180 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:43:43.180 -07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2023-02-02 08:43:43.180 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2023-02-02 08:43:43.182 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:43:43.183 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:43:43.183 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:43:43.183 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:43:43.183 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:43:43.184 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:43:43.194 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 08:43:43.198 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 08:43:43.198 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 08:43:43.198 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 08:43:43.202 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 08:43:43.202 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 08:43:43.232 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 60.6837ms
2023-02-02 08:43:43.233 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 08:43:43.233 -07:00 [DBG] Connection id "0HMO56H05AQPJ" completed keep alive response.
2023-02-02 08:43:43.233 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 08:43:43.233 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities - - - 200 247 application/json;+charset=utf-8 88.2442ms
2023-02-02 08:43:50.714 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities/1?includePointsOfInterest=true - -
2023-02-02 08:43:50.714 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2023-02-02 08:43:50.714 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/1'
2023-02-02 08:43:50.715 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:43:50.716 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:43:50.716 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:43:50.720 -07:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 08:43:50.720 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 08:43:50.721 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 08:43:50.721 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 08:43:50.721 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 08:43:50.721 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 08:43:50.721 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:43:50.724 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:43:50.733 -07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-02-02 08:43:50.733 -07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-02-02 08:43:50.733 -07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-02-02 08:43:50.733 -07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-02-02 08:43:50.733 -07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-02-02 08:43:50.733 -07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-02-02 08:43:50.733 -07:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-02-02 08:43:50.734 -07:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2023-02-02 08:43:50.735 -07:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:43:50.735 -07:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:43:50.735 -07:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-02-02 08:43:50.735 -07:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:43:50.757 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 08:43:50.759 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.PointsOfInterest)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-02-02 08:43:50.765 -07:00 [DBG] Including navigation: 'City.PointsOfInterest'.
2023-02-02 08:43:50.808 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 08:43:50.808 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:43:50.808 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:43:50.808 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:43:50.808 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:43:50.808 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-02-02 08:43:50.809 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-02-02 08:43:50.809 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:43:50.811 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:43:50.814 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:43:50.814 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:43:50.814 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:43:50.814 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:43:50.815 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 08:43:50.815 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 08:43:50.815 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 08:43:50.815 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 08:43:50.815 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 08:43:50.815 -07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityDto'.
2023-02-02 08:43:50.817 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 96.2721ms
2023-02-02 08:43:50.817 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:43:50.817 -07:00 [DBG] Connection id "0HMO56H05AQPJ" completed keep alive response.
2023-02-02 08:43:50.817 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 08:43:50.817 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities/1?includePointsOfInterest=true - - - 200 351 application/json;+charset=utf-8 103.1345ms
2023-02-02 08:43:55.787 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities/3?includePointsOfInterest=true - -
2023-02-02 08:43:55.787 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3'
2023-02-02 08:43:55.787 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/3'
2023-02-02 08:43:55.787 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:43:55.787 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:43:55.788 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:43:55.789 -07:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 08:43:55.789 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 08:43:55.789 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 08:43:55.789 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 08:43:55.789 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 08:43:55.789 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 08:43:55.789 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:43:55.790 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:43:55.790 -07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-02-02 08:43:55.790 -07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-02-02 08:43:55.790 -07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-02-02 08:43:55.790 -07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-02-02 08:43:55.790 -07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-02-02 08:43:55.790 -07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-02-02 08:43:55.790 -07:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-02-02 08:43:55.790 -07:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2023-02-02 08:43:55.790 -07:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:43:55.790 -07:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:43:55.790 -07:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-02-02 08:43:55.790 -07:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:43:55.793 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 08:43:55.797 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:43:55.797 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:43:55.797 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:43:55.797 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:43:55.797 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-02-02 08:43:55.798 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-02-02 08:43:55.798 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:43:55.798 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:43:55.798 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:43:55.798 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:43:55.798 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:43:55.798 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:43:55.798 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:43:55.798 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 08:43:55.798 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 08:43:55.798 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 08:43:55.798 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 08:43:55.798 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 08:43:55.799 -07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityDto'.
2023-02-02 08:43:55.806 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 16.4573ms
2023-02-02 08:43:55.806 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:43:55.806 -07:00 [DBG] Connection id "0HMO56H05AQPJ" completed keep alive response.
2023-02-02 08:43:55.806 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 08:43:55.806 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities/3?includePointsOfInterest=true - - - 200 438 application/json;+charset=utf-8 19.1565ms
2023-02-02 08:46:06.046 -07:00 [DBG] Connection id "0HMO56H05AQPJ" disconnecting.
2023-02-02 08:46:06.050 -07:00 [DBG] Connection id "0HMO56H05AQPJ" stopped.
2023-02-02 08:46:06.055 -07:00 [DBG] Connection id "0HMO56H05AQPJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-02-02 08:48:26.971 -07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-02-02 08:48:27.130 -07:00 [DBG] Hosting starting
2023-02-02 08:48:27.298 -07:00 [DBG] Using development certificate: CN=localhost (Thumbprint: DF901BD9753E125923C6593F672F66E5F7B6BAB5)
2023-02-02 08:48:27.376 -07:00 [INF] Now listening on: https://localhost:7151
2023-02-02 08:48:27.376 -07:00 [INF] Now listening on: http://localhost:5197
2023-02-02 08:48:27.376 -07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-02-02 08:48:27.377 -07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-02-02 08:48:27.377 -07:00 [INF] Hosting environment: Development
2023-02-02 08:48:27.377 -07:00 [INF] Content root path: /Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/
2023-02-02 08:48:27.377 -07:00 [DBG] Hosting started
2023-02-02 08:48:36.621 -07:00 [DBG] Connection id "0HMO56JP69LNR" accepted.
2023-02-02 08:48:36.622 -07:00 [DBG] Connection id "0HMO56JP69LNR" started.
2023-02-02 08:48:36.697 -07:00 [DBG] Connection 0HMO56JP69LNR established using the following protocol: "Tls12"
2023-02-02 08:48:36.739 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities/1?includePointsOfInterest=true - -
2023-02-02 08:48:36.743 -07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-02-02 08:48:36.791 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2023-02-02 08:48:36.794 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/1'
2023-02-02 08:48:36.795 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:48:36.832 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:48:36.836 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:48:36.869 -07:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 08:48:36.870 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 08:48:36.870 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 08:48:36.871 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 08:48:36.871 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 08:48:36.871 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 08:48:36.875 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:48:36.941 -07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-02-02 08:48:37.027 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:48:37.038 -07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-02-02 08:48:37.041 -07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-02-02 08:48:37.043 -07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-02-02 08:48:37.043 -07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-02-02 08:48:37.044 -07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-02-02 08:48:37.051 -07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-02-02 08:48:37.052 -07:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-02-02 08:48:37.052 -07:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2023-02-02 08:48:37.053 -07:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:48:37.053 -07:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:48:37.053 -07:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-02-02 08:48:37.053 -07:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:48:37.415 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 08:48:37.448 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.PointsOfInterest)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-02-02 08:48:37.468 -07:00 [DBG] Including navigation: 'City.PointsOfInterest'.
2023-02-02 08:48:37.599 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 08:48:37.619 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:48:37.667 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (45ms).
2023-02-02 08:48:37.670 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:48:37.680 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:48:37.687 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-02-02 08:48:37.704 -07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-02-02 08:48:37.712 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:48:37.725 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:48:37.731 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:48:37.734 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:48:37.736 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:48:37.738 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:48:37.755 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 08:48:37.760 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 08:48:37.760 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 08:48:37.760 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 08:48:37.764 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 08:48:37.764 -07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityDto'.
2023-02-02 08:48:37.859 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 985.1737ms
2023-02-02 08:48:37.861 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:48:37.861 -07:00 [DBG] Connection id "0HMO56JP69LNR" completed keep alive response.
2023-02-02 08:48:37.863 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 08:48:37.866 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities/1?includePointsOfInterest=true - - - 200 351 application/json;+charset=utf-8 1127.4068ms
2023-02-02 08:49:00.264 -07:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7151/api/cities/1/pointsofinterest/1 application/json 91
2023-02-02 08:49:00.265 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2023-02-02 08:49:00.265 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointofinterestId}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2023-02-02 08:49:00.265 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)'
2023-02-02 08:49:00.265 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:49:00.265 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)'
2023-02-02 08:49:00.270 -07:00 [INF] Route matched with {action = "PartiallyUpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PartiallyUpdatePointOfInterest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-02-02 08:49:00.270 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 08:49:00.270 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 08:49:00.270 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 08:49:00.270 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 08:49:00.270 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 08:49:00.270 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 08:49:00.271 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 08:49:00.271 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-02-02 08:49:00.271 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-02-02 08:49:00.271 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:49:00.271 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:49:00.271 -07:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-02-02 08:49:00.271 -07:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:49:00.271 -07:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-02-02 08:49:00.271 -07:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-02-02 08:49:00.271 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-02-02 08:49:00.271 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-02-02 08:49:00.271 -07:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-02-02 08:49:00.271 -07:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-02-02 08:49:00.271 -07:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]' ...
2023-02-02 08:49:00.274 -07:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]' using the name '' in request data ...
2023-02-02 08:49:00.276 -07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-02-02 08:49:00.280 -07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-02-02 08:49:00.297 -07:00 [DBG] Connection id "0HMO56JP69LNR", Request id "0HMO56JP69LNR:00000003": started reading request body.
2023-02-02 08:49:00.297 -07:00 [DBG] Connection id "0HMO56JP69LNR", Request id "0HMO56JP69LNR:00000003": done reading request body.
2023-02-02 08:49:00.342 -07:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]'.
2023-02-02 08:49:00.342 -07:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]'.
2023-02-02 08:49:00.342 -07:00 [DBG] Attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]' ...
2023-02-02 08:49:00.350 -07:00 [DBG] Done attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.API.Models.PointOfInterestForUpdateDto]'.
2023-02-02 08:49:00.353 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 08:49:00.376 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-02-02 08:49:00.406 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 08:49:00.410 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:49:00.410 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:49:00.410 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:49:00.410 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:49:00.410 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 08:49:00.410 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 08:49:00.411 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:49:00.411 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:49:00.411 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:49:00.413 -07:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0 && p.Id == __pointOfInterestId_1)
    .FirstOrDefault()'
2023-02-02 08:49:00.415 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityId_0) && (p.Id == @__pointOfInterestId_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 08:49:00.417 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:49:00.417 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:49:00.417 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:49:00.417 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:49:00.417 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-02-02 08:49:00.417 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-02-02 08:49:00.417 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:49:00.417 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:49:00.417 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:49:00.417 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:49:00.426 -07:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-02-02 08:49:00.427 -07:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-02-02 08:49:00.431 -07:00 [DBG] The unchanged property 'PointOfInterest.Name' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-02-02 08:49:00.435 -07:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:49:00.436 -07:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-02-02 08:49:00.445 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:49:00.446 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:49:00.446 -07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-02-02 08:49:00.448 -07:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-02-02 08:49:00.472 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:49:00.472 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:49:00.472 -07:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 12)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointsOfInterest" SET "Name" = @p0
WHERE "Id" = @p1;
SELECT changes();
2023-02-02 08:49:00.473 -07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 12)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointsOfInterest" SET "Name" = @p0
WHERE "Id" = @p1;
SELECT changes();
2023-02-02 08:49:00.476 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:49:00.477 -07:00 [DBG] Committing transaction.
2023-02-02 08:49:00.479 -07:00 [DBG] Committed transaction.
2023-02-02 08:49:00.479 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:49:00.480 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:49:00.480 -07:00 [DBG] Disposing transaction.
2023-02-02 08:49:00.485 -07:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:49:00.485 -07:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-02-02 08:49:00.488 -07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2023-02-02 08:49:00.488 -07:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API) in 217.7224ms
2023-02-02 08:49:00.488 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfo.API)'
2023-02-02 08:49:00.488 -07:00 [DBG] Connection id "0HMO56JP69LNR" completed keep alive response.
2023-02-02 08:49:00.488 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 08:49:00.488 -07:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7151/api/cities/1/pointsofinterest/1 application/json 91 - 204 - - 224.6521ms
2023-02-02 08:49:04.738 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities/1?includePointsOfInterest=true - -
2023-02-02 08:49:04.739 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2023-02-02 08:49:04.739 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/1'
2023-02-02 08:49:04.739 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:49:04.740 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:49:04.740 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:49:04.742 -07:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 08:49:04.742 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 08:49:04.742 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 08:49:04.742 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 08:49:04.742 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 08:49:04.742 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 08:49:04.742 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:49:04.748 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:49:04.748 -07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-02-02 08:49:04.749 -07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-02-02 08:49:04.749 -07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-02-02 08:49:04.749 -07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-02-02 08:49:04.749 -07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-02-02 08:49:04.749 -07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-02-02 08:49:04.749 -07:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-02-02 08:49:04.749 -07:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2023-02-02 08:49:04.749 -07:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:49:04.749 -07:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:49:04.749 -07:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-02-02 08:49:04.749 -07:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:49:04.767 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 08:49:04.768 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:49:04.769 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:49:04.769 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:49:04.769 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:49:04.769 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-02-02 08:49:04.769 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-02-02 08:49:04.769 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:49:04.769 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:49:04.769 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:49:04.769 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:49:04.769 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:49:04.769 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:49:04.769 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 08:49:04.769 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 08:49:04.769 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 08:49:04.769 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 08:49:04.769 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 08:49:04.769 -07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityDto'.
2023-02-02 08:49:04.769 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 27.0765ms
2023-02-02 08:49:04.769 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:49:04.769 -07:00 [DBG] Connection id "0HMO56JP69LNR" completed keep alive response.
2023-02-02 08:49:04.769 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 08:49:04.769 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities/1?includePointsOfInterest=true - - - 200 341 application/json;+charset=utf-8 31.0525ms
2023-02-02 08:53:42.495 -07:00 [DBG] Connection id "0HMO56JP69LNR" received FIN.
2023-02-02 08:53:42.503 -07:00 [DBG] Connection id "0HMO56JP69LNS" accepted.
2023-02-02 08:53:42.574 -07:00 [DBG] Connection id "0HMO56JP69LNS" started.
2023-02-02 08:53:42.587 -07:00 [DBG] Connection id "0HMO56JP69LNR" disconnecting.
2023-02-02 08:53:42.588 -07:00 [DBG] Connection id "0HMO56JP69LNR" sending FIN because: "The client closed the connection."
2023-02-02 08:53:42.599 -07:00 [DBG] Connection id "0HMO56JP69LNR" stopped.
2023-02-02 08:53:42.624 -07:00 [DBG] Connection 0HMO56JP69LNS established using the following protocol: "Tls12"
2023-02-02 08:53:42.624 -07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7151/api/cities/3/pointsofinterest/7 - -
2023-02-02 08:53:42.625 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest/7'
2023-02-02 08:53:42.625 -07:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-02-02 08:53:42.625 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:53:42.625 -07:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2023-02-02 08:53:42.626 -07:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2023-02-02 08:53:42.626 -07:00 [DBG] Connection id "0HMO56JP69LNS" completed keep alive response.
2023-02-02 08:53:42.626 -07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7151/api/cities/3/pointsofinterest/7 - - - 405 0 - 1.2836ms
2023-02-02 08:54:07.949 -07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-02-02 08:54:08.110 -07:00 [DBG] Hosting starting
2023-02-02 08:54:08.281 -07:00 [DBG] Using development certificate: CN=localhost (Thumbprint: DF901BD9753E125923C6593F672F66E5F7B6BAB5)
2023-02-02 08:54:08.432 -07:00 [INF] Now listening on: https://localhost:7151
2023-02-02 08:54:08.432 -07:00 [INF] Now listening on: http://localhost:5197
2023-02-02 08:54:08.432 -07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-02-02 08:54:08.432 -07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-02-02 08:54:08.433 -07:00 [INF] Hosting environment: Development
2023-02-02 08:54:08.433 -07:00 [INF] Content root path: /Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/
2023-02-02 08:54:08.433 -07:00 [DBG] Hosting started
2023-02-02 08:54:11.020 -07:00 [DBG] Connection id "0HMO56MSRC251" accepted.
2023-02-02 08:54:11.022 -07:00 [DBG] Connection id "0HMO56MSRC251" started.
2023-02-02 08:54:11.104 -07:00 [DBG] Connection 0HMO56MSRC251 established using the following protocol: "Tls12"
2023-02-02 08:54:11.148 -07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7151/api/cities/3/pointsofinterest/7 - -
2023-02-02 08:54:11.152 -07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-02-02 08:54:11.199 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest/7'
2023-02-02 08:54:11.202 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/cities/3/pointsofinterest/7'
2023-02-02 08:54:11.203 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2023-02-02 08:54:11.213 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:54:11.217 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2023-02-02 08:54:11.250 -07:00 [INF] Route matched with {action = "DeletePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] DeletePointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-02-02 08:54:11.251 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 08:54:11.251 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 08:54:11.252 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 08:54:11.252 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 08:54:11.253 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 08:54:11.256 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 08:54:11.325 -07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-02-02 08:54:11.416 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 08:54:11.425 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-02-02 08:54:11.427 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-02-02 08:54:11.429 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:54:11.429 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:54:11.430 -07:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-02-02 08:54:11.438 -07:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:54:11.438 -07:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-02-02 08:54:11.438 -07:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-02-02 08:54:11.438 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-02-02 08:54:11.438 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-02-02 08:54:11.438 -07:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-02-02 08:54:11.438 -07:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-02-02 08:54:11.825 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 08:54:11.846 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-02-02 08:54:11.934 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 08:54:11.954 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:54:12.003 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (47ms).
2023-02-02 08:54:12.007 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:12.017 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:12.025 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 08:54:12.043 -07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 08:54:12.046 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:54:12.048 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:12.050 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:12.054 -07:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0 && p.Id == __pointOfInterestId_1)
    .FirstOrDefault()'
2023-02-02 08:54:12.082 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityId_0) && (p.Id == @__pointOfInterestId_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 08:54:12.086 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:54:12.087 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:54:12.087 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:12.087 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:12.087 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-02-02 08:54:12.087 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-02-02 08:54:12.093 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:12.104 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:54:12.104 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:12.104 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:12.110 -07:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:12.113 -07:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-02-02 08:54:12.115 -07:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-02-02 08:54:12.121 -07:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-02-02 08:54:12.129 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:12.129 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:12.129 -07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-02-02 08:54:12.131 -07:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-02-02 08:54:12.158 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:54:12.158 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:54:12.158 -07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PointsOfInterest"
WHERE "Id" = @p0;
SELECT changes();
2023-02-02 08:54:12.159 -07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PointsOfInterest"
WHERE "Id" = @p0;
SELECT changes();
2023-02-02 08:54:12.162 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:54:12.163 -07:00 [DBG] Committing transaction.
2023-02-02 08:54:12.165 -07:00 [DBG] Committed transaction.
2023-02-02 08:54:12.166 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:12.166 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:12.167 -07:00 [DBG] Disposing transaction.
2023-02-02 08:54:12.172 -07:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:12.172 -07:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-02-02 08:54:12.177 -07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2023-02-02 08:54:12.180 -07:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API) in 925.1135ms
2023-02-02 08:54:12.182 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2023-02-02 08:54:12.195 -07:00 [DBG] Connection id "0HMO56MSRC251" completed keep alive response.
2023-02-02 08:54:12.198 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 08:54:12.200 -07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7151/api/cities/3/pointsofinterest/7 - - - 204 - - 1053.2995ms
2023-02-02 08:54:24.361 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities/3?includePointsOfInterest=true - -
2023-02-02 08:54:24.361 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3'
2023-02-02 08:54:24.362 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/3'
2023-02-02 08:54:24.362 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:54:24.384 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:54:24.384 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:54:24.386 -07:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 08:54:24.386 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 08:54:24.386 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 08:54:24.386 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 08:54:24.386 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 08:54:24.386 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 08:54:24.386 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:54:24.386 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:54:24.390 -07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-02-02 08:54:24.390 -07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-02-02 08:54:24.390 -07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-02-02 08:54:24.390 -07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-02-02 08:54:24.390 -07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-02-02 08:54:24.390 -07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-02-02 08:54:24.390 -07:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-02-02 08:54:24.390 -07:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2023-02-02 08:54:24.391 -07:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:54:24.391 -07:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:54:24.391 -07:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-02-02 08:54:24.391 -07:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:54:24.394 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 08:54:24.396 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.PointsOfInterest)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-02-02 08:54:24.401 -07:00 [DBG] Including navigation: 'City.PointsOfInterest'.
2023-02-02 08:54:24.443 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 08:54:24.444 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:54:24.444 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:54:24.444 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:24.444 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:24.444 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-02-02 08:54:24.445 -07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-02-02 08:54:24.445 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:24.449 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:24.452 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:24.452 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:54:24.452 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:24.452 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:24.469 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 08:54:24.474 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 08:54:24.474 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 08:54:24.474 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 08:54:24.479 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 08:54:24.479 -07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityDto'.
2023-02-02 08:54:24.554 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 168.2755ms
2023-02-02 08:54:24.554 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:54:24.554 -07:00 [DBG] Connection id "0HMO56MSRC251" completed keep alive response.
2023-02-02 08:54:24.554 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 08:54:24.554 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities/3?includePointsOfInterest=true - - - 200 326 application/json;+charset=utf-8 193.7036ms
2023-02-02 08:54:35.119 -07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7151/api/cities/3/pointsofinterest application/json 117
2023-02-02 08:54:35.120 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2023-02-02 08:54:35.120 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2023-02-02 08:54:35.120 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-02-02 08:54:35.120 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:54:35.121 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-02-02 08:54:35.125 -07:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-02-02 08:54:35.125 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 08:54:35.126 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 08:54:35.126 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 08:54:35.126 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 08:54:35.126 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 08:54:35.126 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 08:54:35.130 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 08:54:35.130 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-02-02 08:54:35.130 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-02-02 08:54:35.130 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:54:35.130 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:54:35.131 -07:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-02-02 08:54:35.131 -07:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:54:35.131 -07:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-02-02 08:54:35.140 -07:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2023-02-02 08:54:35.143 -07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-02-02 08:54:35.147 -07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-02-02 08:54:35.160 -07:00 [DBG] Connection id "0HMO56MSRC251", Request id "0HMO56MSRC251:00000004": started reading request body.
2023-02-02 08:54:35.160 -07:00 [DBG] Connection id "0HMO56MSRC251", Request id "0HMO56MSRC251:00000004": done reading request body.
2023-02-02 08:54:35.186 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-02-02 08:54:35.186 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-02-02 08:54:35.186 -07:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-02-02 08:54:35.195 -07:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-02-02 08:54:35.215 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 08:54:35.217 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:54:35.217 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:54:35.217 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:35.217 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:35.217 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 08:54:35.217 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 08:54:35.217 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:54:35.217 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:35.217 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:35.219 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-02-02 08:54:35.220 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 08:54:35.220 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:54:35.220 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:54:35.220 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:35.220 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:35.221 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-02-02 08:54:35.221 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-02-02 08:54:35.221 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:35.221 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:54:35.221 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:35.221 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:35.221 -07:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-02-02 08:54:35.221 -07:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-02-02 08:54:35.224 -07:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:35.235 -07:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:35.237 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:35.237 -07:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-02-02 08:54:35.238 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:35.238 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:35.238 -07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-02-02 08:54:35.238 -07:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-02-02 08:54:35.241 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:54:35.241 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:54:35.241 -07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-02-02 08:54:35.242 -07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-02-02 08:54:35.249 -07:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-02-02 08:54:35.252 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:54:35.254 -07:00 [DBG] Committing transaction.
2023-02-02 08:54:35.256 -07:00 [DBG] Committed transaction.
2023-02-02 08:54:35.257 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:35.257 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:35.257 -07:00 [DBG] Disposing transaction.
2023-02-02 08:54:35.257 -07:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:35.257 -07:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-02-02 08:54:35.261 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 08:54:35.261 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 08:54:35.261 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 08:54:35.261 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 08:54:35.261 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 08:54:35.261 -07:00 [INF] Executing CreatedAtRouteResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2023-02-02 08:54:35.275 -07:00 [DBG] Found the endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-02-02 08:54:35.290 -07:00 [DBG] Successfully processed template api/cities/{cityId}/pointsofinterest/{pointofinterestid} for CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) resulting in /api/cities/3/pointsofinterest/8 and 
2023-02-02 08:54:35.290 -07:00 [DBG] Link generation succeeded for endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] with result /api/cities/3/pointsofinterest/8
2023-02-02 08:54:35.291 -07:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 165.0682ms
2023-02-02 08:54:35.291 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-02-02 08:54:35.291 -07:00 [DBG] Connection id "0HMO56MSRC251" completed keep alive response.
2023-02-02 08:54:35.291 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 08:54:35.291 -07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7151/api/cities/3/pointsofinterest application/json 117 - 201 111 application/json;+charset=utf-8 172.0573ms
2023-02-02 08:54:42.829 -07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7151/api/cities/3/pointsofinterest/8 - -
2023-02-02 08:54:42.829 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest/8'
2023-02-02 08:54:42.829 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/cities/3/pointsofinterest/8'
2023-02-02 08:54:42.829 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2023-02-02 08:54:42.829 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:54:42.829 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2023-02-02 08:54:42.830 -07:00 [INF] Route matched with {action = "DeletePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] DeletePointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-02-02 08:54:42.830 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 08:54:42.830 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 08:54:42.830 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 08:54:42.830 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 08:54:42.830 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 08:54:42.830 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 08:54:42.830 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 08:54:42.830 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-02-02 08:54:42.830 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-02-02 08:54:42.830 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:54:42.830 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:54:42.830 -07:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-02-02 08:54:42.830 -07:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:54:42.830 -07:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-02-02 08:54:42.830 -07:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-02-02 08:54:42.830 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-02-02 08:54:42.830 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-02-02 08:54:42.830 -07:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-02-02 08:54:42.830 -07:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-02-02 08:54:42.831 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 08:54:42.831 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:54:42.831 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:54:42.831 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:42.831 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:42.831 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 08:54:42.831 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 08:54:42.831 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:54:42.831 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:42.831 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:42.832 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:54:42.832 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:54:42.832 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:42.832 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:42.832 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-02-02 08:54:42.832 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-02-02 08:54:42.832 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:42.832 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:54:42.832 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:42.832 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:42.832 -07:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:42.832 -07:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-02-02 08:54:42.832 -07:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-02-02 08:54:42.832 -07:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-02-02 08:54:42.832 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:42.832 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:42.832 -07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-02-02 08:54:42.832 -07:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-02-02 08:54:42.832 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:54:42.832 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:54:42.832 -07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PointsOfInterest"
WHERE "Id" = @p0;
SELECT changes();
2023-02-02 08:54:42.833 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PointsOfInterest"
WHERE "Id" = @p0;
SELECT changes();
2023-02-02 08:54:42.833 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:54:42.833 -07:00 [DBG] Committing transaction.
2023-02-02 08:54:42.837 -07:00 [DBG] Committed transaction.
2023-02-02 08:54:42.837 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:42.837 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:42.837 -07:00 [DBG] Disposing transaction.
2023-02-02 08:54:42.837 -07:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:42.837 -07:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-02-02 08:54:42.841 -07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2023-02-02 08:54:42.841 -07:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API) in 10.9548ms
2023-02-02 08:54:42.841 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2023-02-02 08:54:42.841 -07:00 [DBG] Connection id "0HMO56MSRC251" completed keep alive response.
2023-02-02 08:54:42.841 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 08:54:42.841 -07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7151/api/cities/3/pointsofinterest/8 - - - 204 - - 12.3937ms
2023-02-02 08:54:46.833 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities/3?includePointsOfInterest=true - -
2023-02-02 08:54:46.833 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3'
2023-02-02 08:54:46.833 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/3'
2023-02-02 08:54:46.833 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:54:46.834 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:54:46.834 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:54:46.834 -07:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 08:54:46.835 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 08:54:46.835 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 08:54:46.835 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 08:54:46.835 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 08:54:46.835 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 08:54:46.835 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:54:46.835 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:54:46.836 -07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-02-02 08:54:46.836 -07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-02-02 08:54:46.836 -07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-02-02 08:54:46.836 -07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-02-02 08:54:46.836 -07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-02-02 08:54:46.836 -07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-02-02 08:54:46.836 -07:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-02-02 08:54:46.836 -07:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2023-02-02 08:54:46.837 -07:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:54:46.837 -07:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:54:46.837 -07:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-02-02 08:54:46.837 -07:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:54:46.838 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 08:54:46.838 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:54:46.839 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:54:46.839 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:46.839 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:46.839 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-02-02 08:54:46.839 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-02-02 08:54:46.839 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:46.839 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:46.840 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:46.841 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:54:46.841 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:46.841 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:46.841 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 08:54:46.841 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 08:54:46.841 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 08:54:46.841 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 08:54:46.841 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 08:54:46.841 -07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityDto'.
2023-02-02 08:54:46.842 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 7.5982ms
2023-02-02 08:54:46.843 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:54:46.843 -07:00 [DBG] Connection id "0HMO56MSRC251" completed keep alive response.
2023-02-02 08:54:46.843 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 08:54:46.843 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities/3?includePointsOfInterest=true - - - 200 326 application/json;+charset=utf-8 10.3047ms
2023-02-02 08:54:52.473 -07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7151/api/cities/3/pointsofinterest application/json 117
2023-02-02 08:54:52.473 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2023-02-02 08:54:52.473 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/3/pointsofinterest'
2023-02-02 08:54:52.473 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-02-02 08:54:52.473 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:54:52.473 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-02-02 08:54:52.473 -07:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-02-02 08:54:52.473 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 08:54:52.473 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 08:54:52.473 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 08:54:52.473 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 08:54:52.474 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 08:54:52.474 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 08:54:52.474 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 08:54:52.474 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-02-02 08:54:52.474 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-02-02 08:54:52.474 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:54:52.474 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:54:52.474 -07:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-02-02 08:54:52.474 -07:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-02-02 08:54:52.474 -07:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-02-02 08:54:52.475 -07:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2023-02-02 08:54:52.475 -07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-02-02 08:54:52.475 -07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-02-02 08:54:52.475 -07:00 [DBG] Connection id "0HMO56MSRC251", Request id "0HMO56MSRC251:00000007": started reading request body.
2023-02-02 08:54:52.475 -07:00 [DBG] Connection id "0HMO56MSRC251", Request id "0HMO56MSRC251:00000007": done reading request body.
2023-02-02 08:54:52.475 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-02-02 08:54:52.475 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-02-02 08:54:52.475 -07:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-02-02 08:54:52.477 -07:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-02-02 08:54:52.477 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 08:54:52.478 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:54:52.478 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:54:52.478 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:52.478 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:52.478 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 08:54:52.478 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 08:54:52.478 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:54:52.478 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:52.478 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:52.479 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:54:52.479 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:54:52.479 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:52.479 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:52.479 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-02-02 08:54:52.479 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-02-02 08:54:52.479 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:52.479 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:54:52.479 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:52.480 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:52.480 -07:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-02-02 08:54:52.480 -07:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-02-02 08:54:52.480 -07:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:52.481 -07:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:52.481 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:52.481 -07:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-02-02 08:54:52.481 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:52.482 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:52.482 -07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-02-02 08:54:52.482 -07:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-02-02 08:54:52.482 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:54:52.482 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:54:52.482 -07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-02-02 08:54:52.482 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-02-02 08:54:52.487 -07:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-02-02 08:54:52.487 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:54:52.487 -07:00 [DBG] Committing transaction.
2023-02-02 08:54:52.488 -07:00 [DBG] Committed transaction.
2023-02-02 08:54:52.488 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:52.488 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:52.489 -07:00 [DBG] Disposing transaction.
2023-02-02 08:54:52.489 -07:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:52.489 -07:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-02-02 08:54:52.489 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 08:54:52.489 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 08:54:52.489 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 08:54:52.489 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 08:54:52.489 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 08:54:52.489 -07:00 [INF] Executing CreatedAtRouteResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2023-02-02 08:54:52.489 -07:00 [DBG] Found the endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-02-02 08:54:52.489 -07:00 [DBG] Successfully processed template api/cities/{cityId}/pointsofinterest/{pointofinterestid} for CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) resulting in /api/cities/3/pointsofinterest/9 and 
2023-02-02 08:54:52.490 -07:00 [DBG] Link generation succeeded for endpoints ["CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)"] with result /api/cities/3/pointsofinterest/9
2023-02-02 08:54:52.490 -07:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 15.9517ms
2023-02-02 08:54:52.490 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-02-02 08:54:52.490 -07:00 [DBG] Connection id "0HMO56MSRC251" completed keep alive response.
2023-02-02 08:54:52.490 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 08:54:52.490 -07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7151/api/cities/3/pointsofinterest application/json 117 - 201 111 application/json;+charset=utf-8 17.6193ms
2023-02-02 08:54:55.330 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities/3?includePointsOfInterest=true - -
2023-02-02 08:54:55.330 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3'
2023-02-02 08:54:55.330 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/3'
2023-02-02 08:54:55.330 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:54:55.330 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 08:54:55.330 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:54:55.330 -07:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 08:54:55.331 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 08:54:55.331 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 08:54:55.331 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 08:54:55.331 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 08:54:55.331 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 08:54:55.331 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:54:55.331 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 08:54:55.331 -07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-02-02 08:54:55.331 -07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-02-02 08:54:55.331 -07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-02-02 08:54:55.331 -07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-02-02 08:54:55.331 -07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-02-02 08:54:55.336 -07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-02-02 08:54:55.336 -07:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-02-02 08:54:55.342 -07:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2023-02-02 08:54:55.342 -07:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:54:55.342 -07:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:54:55.342 -07:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-02-02 08:54:55.342 -07:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-02-02 08:54:55.344 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 08:54:55.344 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 08:54:55.345 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 08:54:55.345 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:55.345 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:55.345 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-02-02 08:54:55.345 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-02-02 08:54:55.346 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:55.346 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:55.346 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:55.346 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 08:54:55.346 -07:00 [DBG] A data reader was disposed.
2023-02-02 08:54:55.346 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 08:54:55.346 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 08:54:55.346 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 08:54:55.346 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 08:54:55.346 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 08:54:55.346 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 08:54:55.346 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 08:54:55.346 -07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityDto'.
2023-02-02 08:54:55.347 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 16.0062ms
2023-02-02 08:54:55.347 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-02-02 08:54:55.347 -07:00 [DBG] Connection id "0HMO56MSRC251" completed keep alive response.
2023-02-02 08:54:55.347 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 08:54:55.348 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities/3?includePointsOfInterest=true - - - 200 438 application/json;+charset=utf-8 17.6309ms
2023-02-02 09:06:35.403 -07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-02-02 09:06:35.569 -07:00 [DBG] Hosting starting
2023-02-02 09:06:35.746 -07:00 [DBG] Using development certificate: CN=localhost (Thumbprint: DF901BD9753E125923C6593F672F66E5F7B6BAB5)
2023-02-02 09:06:35.827 -07:00 [INF] Now listening on: https://localhost:7151
2023-02-02 09:06:35.827 -07:00 [INF] Now listening on: http://localhost:5197
2023-02-02 09:06:35.827 -07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-02-02 09:06:35.827 -07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-02-02 09:06:35.827 -07:00 [INF] Hosting environment: Development
2023-02-02 09:06:35.827 -07:00 [INF] Content root path: /Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/
2023-02-02 09:06:35.828 -07:00 [DBG] Hosting started
2023-02-02 09:06:44.524 -07:00 [DBG] Connection id "0HMO56TTDB3H5" accepted.
2023-02-02 09:06:44.525 -07:00 [DBG] Connection id "0HMO56TTDB3H5" started.
2023-02-02 09:06:44.598 -07:00 [DBG] Connection 0HMO56TTDB3H5 established using the following protocol: "Tls12"
2023-02-02 09:06:44.641 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities?name=Antwerp - -
2023-02-02 09:06:44.645 -07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-02-02 09:06:44.690 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-02-02 09:06:44.692 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-02-02 09:06:44.693 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:06:44.728 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 09:06:44.732 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:06:44.767 -07:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 09:06:44.767 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 09:06:44.768 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 09:06:44.769 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 09:06:44.769 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 09:06:44.770 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 09:06:44.773 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:06:44.849 -07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-02-02 09:06:44.934 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:06:44.944 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-02-02 09:06:44.947 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name 'name' in request data ...
2023-02-02 09:06:44.950 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:06:44.950 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:06:44.950 -07:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-02-02 09:06:44.959 -07:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-02-02 09:06:45.328 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 09:06:45.350 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Name == __name_0)
    .OrderBy(c => c.Name)'
2023-02-02 09:06:45.467 -07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        WHERE c.Name == @__name_0
        ORDER BY c.Name ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-02-02 09:06:45.486 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 09:06:45.532 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (45ms).
2023-02-02 09:06:45.535 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:06:45.546 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:06:45.554 -07:00 [DBG] Executing DbCommand [Parameters=[@__name_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__name_0
ORDER BY "c"."Name"
2023-02-02 09:06:45.572 -07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__name_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__name_0
ORDER BY "c"."Name"
2023-02-02 09:06:45.580 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 09:06:45.591 -07:00 [DBG] A data reader was disposed.
2023-02-02 09:06:45.593 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:06:45.595 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:06:45.616 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 09:06:45.621 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 09:06:45.621 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 09:06:45.621 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 09:06:45.626 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 09:06:45.626 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 09:06:45.715 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 942.914ms
2023-02-02 09:06:45.717 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:06:45.717 -07:00 [DBG] Connection id "0HMO56TTDB3H5" completed keep alive response.
2023-02-02 09:06:45.719 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 09:06:45.722 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities?name=Antwerp - - - 200 102 application/json;+charset=utf-8 1081.8516ms
2023-02-02 09:07:39.332 -07:00 [DBG] Config reload token fired. Checking for changes...
2023-02-02 09:07:45.853 -07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-02-02 09:07:46.020 -07:00 [DBG] Hosting starting
2023-02-02 09:07:46.193 -07:00 [DBG] Using development certificate: CN=localhost (Thumbprint: DF901BD9753E125923C6593F672F66E5F7B6BAB5)
2023-02-02 09:07:46.272 -07:00 [INF] Now listening on: https://localhost:7151
2023-02-02 09:07:46.272 -07:00 [INF] Now listening on: http://localhost:5197
2023-02-02 09:07:46.272 -07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-02-02 09:07:46.272 -07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-02-02 09:07:46.272 -07:00 [INF] Hosting environment: Development
2023-02-02 09:07:46.272 -07:00 [INF] Content root path: /Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/
2023-02-02 09:07:46.272 -07:00 [DBG] Hosting started
2023-02-02 09:07:49.421 -07:00 [DBG] Connection id "0HMO56UGO7ER9" accepted.
2023-02-02 09:07:49.422 -07:00 [DBG] Connection id "0HMO56UGO7ER9" started.
2023-02-02 09:07:49.496 -07:00 [DBG] Connection 0HMO56UGO7ER9 established using the following protocol: "Tls12"
2023-02-02 09:07:49.540 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities?name=Antwerp - -
2023-02-02 09:07:49.544 -07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-02-02 09:07:49.590 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-02-02 09:07:49.592 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-02-02 09:07:49.593 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:07:49.628 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 09:07:49.632 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:07:49.665 -07:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 09:07:49.666 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 09:07:49.666 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 09:07:49.668 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 09:07:49.668 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 09:07:49.668 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 09:07:49.671 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:07:49.737 -07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-02-02 09:07:49.828 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:07:49.840 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-02-02 09:07:49.843 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name 'name' in request data ...
2023-02-02 09:07:49.846 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:07:49.846 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:07:49.846 -07:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-02-02 09:07:49.855 -07:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-02-02 09:07:50.231 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 09:07:50.253 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Name == __name_0)
    .OrderBy(c => c.Name)'
2023-02-02 09:07:50.371 -07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        WHERE c.Name == @__name_0
        ORDER BY c.Name ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-02-02 09:07:50.390 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 09:07:50.434 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (41ms).
2023-02-02 09:07:50.437 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:07:50.445 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:07:50.452 -07:00 [DBG] Executing DbCommand [Parameters=[@__name_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__name_0
ORDER BY "c"."Name"
2023-02-02 09:07:50.470 -07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__name_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__name_0
ORDER BY "c"."Name"
2023-02-02 09:07:50.478 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 09:07:50.490 -07:00 [DBG] A data reader was disposed.
2023-02-02 09:07:50.492 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:07:50.495 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:07:50.514 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 09:07:50.520 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 09:07:50.520 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 09:07:50.520 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 09:07:50.525 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 09:07:50.525 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 09:07:50.611 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 940.9529ms
2023-02-02 09:07:50.613 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:07:50.614 -07:00 [DBG] Connection id "0HMO56UGO7ER9" completed keep alive response.
2023-02-02 09:07:50.616 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 09:07:50.619 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities?name=Antwerp - - - 200 102 application/json;+charset=utf-8 1080.5594ms
2023-02-02 09:14:14.152 -07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-02-02 09:14:14.314 -07:00 [DBG] Hosting starting
2023-02-02 09:14:14.484 -07:00 [DBG] Using development certificate: CN=localhost (Thumbprint: DF901BD9753E125923C6593F672F66E5F7B6BAB5)
2023-02-02 09:14:14.568 -07:00 [INF] Now listening on: https://localhost:7151
2023-02-02 09:14:14.568 -07:00 [INF] Now listening on: http://localhost:5197
2023-02-02 09:14:14.568 -07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-02-02 09:14:14.568 -07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-02-02 09:14:14.569 -07:00 [INF] Hosting environment: Development
2023-02-02 09:14:14.569 -07:00 [INF] Content root path: /Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/
2023-02-02 09:14:14.569 -07:00 [DBG] Hosting started
2023-02-02 09:14:17.183 -07:00 [DBG] Connection id "0HMO5724A7LPH" accepted.
2023-02-02 09:14:17.184 -07:00 [DBG] Connection id "0HMO5724A7LPH" started.
2023-02-02 09:14:17.265 -07:00 [DBG] Connection 0HMO5724A7LPH established using the following protocol: "Tls12"
2023-02-02 09:14:17.310 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities?name=Antwerp - -
2023-02-02 09:14:17.313 -07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-02-02 09:14:17.359 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-02-02 09:14:17.362 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-02-02 09:14:17.363 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:14:17.399 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 09:14:17.403 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:14:17.438 -07:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 09:14:17.439 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 09:14:17.439 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 09:14:17.440 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 09:14:17.441 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 09:14:17.441 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 09:14:17.444 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:14:17.514 -07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-02-02 09:14:17.599 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:14:17.610 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-02-02 09:14:17.613 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name 'name' in request data ...
2023-02-02 09:14:17.616 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:14:17.616 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:14:17.616 -07:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-02-02 09:14:17.625 -07:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-02-02 09:14:17.625 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:14:17.625 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-02-02 09:14:17.626 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:14:17.626 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:14:17.626 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:14:17.626 -07:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:14:17.626 -07:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:14:18.004 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 09:14:18.027 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Name == __name_0)
    .OrderBy(c => c.Name)'
2023-02-02 09:14:18.140 -07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        WHERE c.Name == @__name_0
        ORDER BY c.Name ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-02-02 09:14:18.158 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 09:14:18.201 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (41ms).
2023-02-02 09:14:18.205 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:14:18.213 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:14:18.220 -07:00 [DBG] Executing DbCommand [Parameters=[@__name_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__name_0
ORDER BY "c"."Name"
2023-02-02 09:14:18.235 -07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__name_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Name" = @__name_0
ORDER BY "c"."Name"
2023-02-02 09:14:18.242 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 09:14:18.254 -07:00 [DBG] A data reader was disposed.
2023-02-02 09:14:18.256 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:14:18.258 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:14:18.279 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 09:14:18.284 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 09:14:18.284 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 09:14:18.285 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 09:14:18.289 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 09:14:18.290 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 09:14:18.378 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 934.7205ms
2023-02-02 09:14:18.380 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:14:18.380 -07:00 [DBG] Connection id "0HMO5724A7LPH" completed keep alive response.
2023-02-02 09:14:18.383 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 09:14:18.385 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities?name=Antwerp - - - 200 102 application/json;+charset=utf-8 1076.6852ms
2023-02-02 09:14:23.004 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities?searchQuery=the - -
2023-02-02 09:14:23.009 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-02-02 09:14:23.009 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-02-02 09:14:23.009 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:14:23.010 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 09:14:23.010 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:14:23.012 -07:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 09:14:23.012 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 09:14:23.012 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 09:14:23.012 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 09:14:23.012 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 09:14:23.012 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 09:14:23.012 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:14:23.013 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:14:23.014 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-02-02 09:14:23.014 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-02-02 09:14:23.014 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-02-02 09:14:23.014 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:14:23.014 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:14:23.014 -07:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-02-02 09:14:23.014 -07:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-02-02 09:14:23.014 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:14:23.014 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name 'searchQuery' in request data ...
2023-02-02 09:14:23.014 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:14:23.014 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:14:23.014 -07:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:14:23.014 -07:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:14:23.048 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 09:14:23.103 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Name.Contains(__searchQuery_0) || c.Description != null && c.Description.Contains(__searchQuery_0))
    .OrderBy(c => c.Name)'
2023-02-02 09:14:23.120 -07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        WHERE ((@__searchQuery_0 == '') || (instr(c.Name, @__searchQuery_0) > 0)) || ((c.Description != NULL) && ((@__searchQuery_0 == '') || (instr(c.Description, @__searchQuery_0) > 0)))
        ORDER BY c.Name ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-02-02 09:14:23.125 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 09:14:23.125 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 09:14:23.125 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:14:23.125 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:14:23.125 -07:00 [DBG] Executing DbCommand [Parameters=[@__searchQuery_0='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE ((@__searchQuery_0 = '') OR (instr("c"."Name", @__searchQuery_0) > 0)) OR (("c"."Description" IS NOT NULL) AND ((@__searchQuery_0 = '') OR (instr("c"."Description", @__searchQuery_0) > 0)))
ORDER BY "c"."Name"
2023-02-02 09:14:23.126 -07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchQuery_0='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE ((@__searchQuery_0 = '') OR (instr("c"."Name", @__searchQuery_0) > 0)) OR (("c"."Description" IS NOT NULL) AND ((@__searchQuery_0 = '') OR (instr("c"."Description", @__searchQuery_0) > 0)))
ORDER BY "c"."Name"
2023-02-02 09:14:23.126 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 09:14:23.126 -07:00 [DBG] A data reader was disposed.
2023-02-02 09:14:23.126 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:14:23.126 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:14:23.126 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 09:14:23.127 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 09:14:23.127 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 09:14:23.127 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 09:14:23.127 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 09:14:23.127 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 09:14:23.127 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 114.395ms
2023-02-02 09:14:23.127 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:14:23.127 -07:00 [DBG] Connection id "0HMO5724A7LPH" completed keep alive response.
2023-02-02 09:14:23.127 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 09:14:23.127 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities?searchQuery=the - - - 200 102 application/json;+charset=utf-8 124.0911ms
2023-02-02 09:14:28.934 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities?name=Antwerp&searchQuery=the - -
2023-02-02 09:14:28.934 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-02-02 09:14:28.934 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-02-02 09:14:28.935 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:14:28.936 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 09:14:28.936 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:14:28.936 -07:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 09:14:28.936 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 09:14:28.937 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 09:14:28.937 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 09:14:28.937 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 09:14:28.937 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 09:14:28.937 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:14:28.944 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:14:28.945 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-02-02 09:14:28.945 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name 'name' in request data ...
2023-02-02 09:14:28.945 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:14:28.945 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:14:28.945 -07:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-02-02 09:14:28.945 -07:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-02-02 09:14:28.945 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:14:28.946 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name 'searchQuery' in request data ...
2023-02-02 09:14:28.946 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:14:28.946 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:14:28.946 -07:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:14:28.946 -07:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:14:28.978 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 09:14:28.979 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Name == __name_0)
    .Where(c => c.Name.Contains(__searchQuery_1) || c.Description != null && c.Description.Contains(__searchQuery_1))
    .OrderBy(c => c.Name)'
2023-02-02 09:14:28.981 -07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        WHERE (c.Name == @__name_0) && (((@__searchQuery_1 == '') || (instr(c.Name, @__searchQuery_1) > 0)) || ((c.Description != NULL) && ((@__searchQuery_1 == '') || (instr(c.Description, @__searchQuery_1) > 0))))
        ORDER BY c.Name ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-02-02 09:14:28.981 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 09:14:28.981 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 09:14:28.981 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:14:28.981 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:14:28.981 -07:00 [DBG] Executing DbCommand [Parameters=[@__name_0='?' (Size = 7), @__searchQuery_1='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE ("c"."Name" = @__name_0) AND (((@__searchQuery_1 = '') OR (instr("c"."Name", @__searchQuery_1) > 0)) OR (("c"."Description" IS NOT NULL) AND ((@__searchQuery_1 = '') OR (instr("c"."Description", @__searchQuery_1) > 0))))
ORDER BY "c"."Name"
2023-02-02 09:14:28.982 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__name_0='?' (Size = 7), @__searchQuery_1='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE ("c"."Name" = @__name_0) AND (((@__searchQuery_1 = '') OR (instr("c"."Name", @__searchQuery_1) > 0)) OR (("c"."Description" IS NOT NULL) AND ((@__searchQuery_1 = '') OR (instr("c"."Description", @__searchQuery_1) > 0))))
ORDER BY "c"."Name"
2023-02-02 09:14:28.982 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 09:14:28.982 -07:00 [DBG] A data reader was disposed.
2023-02-02 09:14:28.982 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:14:28.982 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:14:28.982 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 09:14:28.982 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 09:14:28.982 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 09:14:28.982 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 09:14:28.982 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 09:14:28.982 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 09:14:28.983 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 45.3485ms
2023-02-02 09:14:28.983 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:14:28.983 -07:00 [DBG] Connection id "0HMO5724A7LPH" completed keep alive response.
2023-02-02 09:14:28.983 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 09:14:28.983 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities?name=Antwerp&searchQuery=the - - - 200 102 application/json;+charset=utf-8 48.5075ms
2023-02-02 09:22:45.954 -07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-02-02 09:22:46.128 -07:00 [DBG] Hosting starting
2023-02-02 09:22:46.310 -07:00 [DBG] Using development certificate: CN=localhost (Thumbprint: DF901BD9753E125923C6593F672F66E5F7B6BAB5)
2023-02-02 09:22:46.412 -07:00 [INF] Now listening on: https://localhost:7151
2023-02-02 09:22:46.412 -07:00 [INF] Now listening on: http://localhost:5197
2023-02-02 09:22:46.412 -07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-02-02 09:22:46.412 -07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-02-02 09:22:46.412 -07:00 [INF] Hosting environment: Development
2023-02-02 09:22:46.413 -07:00 [INF] Content root path: /Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/
2023-02-02 09:22:46.413 -07:00 [DBG] Hosting started
2023-02-02 09:23:01.765 -07:00 [DBG] Connection id "0HMO5770L1CKD" accepted.
2023-02-02 09:23:01.766 -07:00 [DBG] Connection id "0HMO5770L1CKD" started.
2023-02-02 09:23:01.839 -07:00 [DBG] Connection 0HMO5770L1CKD established using the following protocol: "Tls12"
2023-02-02 09:23:01.881 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities - -
2023-02-02 09:23:01.885 -07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-02-02 09:23:01.931 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-02-02 09:23:01.934 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-02-02 09:23:01.935 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:23:01.970 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 09:23:01.974 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:23:02.009 -07:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 09:23:02.010 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 09:23:02.010 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 09:23:02.011 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 09:23:02.012 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 09:23:02.012 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 09:23:02.015 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:23:02.086 -07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-02-02 09:23:02.174 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:23:02.182 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-02-02 09:23:02.184 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-02-02 09:23:02.185 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-02-02 09:23:02.185 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:23:02.185 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:23:02.185 -07:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-02-02 09:23:02.189 -07:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-02-02 09:23:02.190 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:23:02.190 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-02-02 09:23:02.190 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:23:02.190 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:23:02.190 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:23:02.190 -07:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:23:02.190 -07:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:23:02.190 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 09:23:02.190 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2023-02-02 09:23:02.190 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:23:02.190 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:23:02.190 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:23:02.190 -07:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 09:23:02.194 -07:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:23:02.194 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 09:23:02.194 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2023-02-02 09:23:02.194 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:23:02.194 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:23:02.194 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:23:02.194 -07:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 09:23:02.194 -07:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:23:02.572 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 09:23:02.594 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2023-02-02 09:23:02.706 -07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-02-02 09:23:02.726 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 09:23:02.778 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (51ms).
2023-02-02 09:23:02.782 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:23:02.793 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:23:02.800 -07:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2023-02-02 09:23:02.817 -07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2023-02-02 09:23:02.824 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 09:23:02.837 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 09:23:02.837 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 09:23:02.839 -07:00 [DBG] A data reader was disposed.
2023-02-02 09:23:02.843 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:23:02.847 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:23:02.868 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 09:23:02.873 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 09:23:02.873 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 09:23:02.873 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 09:23:02.877 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 09:23:02.877 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 09:23:02.977 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 963.1952ms
2023-02-02 09:23:02.979 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:23:02.980 -07:00 [DBG] Connection id "0HMO5770L1CKD" completed keep alive response.
2023-02-02 09:23:02.982 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 09:23:02.985 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities - - - 200 247 application/json;+charset=utf-8 1104.4566ms
2023-02-02 09:23:13.280 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities?pageSize=1&pageNumber=2 - -
2023-02-02 09:23:13.284 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-02-02 09:23:13.284 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-02-02 09:23:13.284 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:23:13.285 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 09:23:13.285 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:23:13.287 -07:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 09:23:13.287 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 09:23:13.287 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 09:23:13.288 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 09:23:13.288 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 09:23:13.288 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 09:23:13.288 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:23:13.289 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:23:13.295 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-02-02 09:23:13.296 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-02-02 09:23:13.296 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-02-02 09:23:13.296 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:23:13.296 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:23:13.296 -07:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-02-02 09:23:13.296 -07:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-02-02 09:23:13.296 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:23:13.296 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-02-02 09:23:13.296 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:23:13.296 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:23:13.296 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:23:13.296 -07:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:23:13.296 -07:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:23:13.296 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 09:23:13.296 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2023-02-02 09:23:13.298 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:23:13.298 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:23:13.298 -07:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 09:23:13.299 -07:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:23:13.299 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 09:23:13.299 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2023-02-02 09:23:13.299 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:23:13.299 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:23:13.299 -07:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 09:23:13.299 -07:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:23:13.300 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 09:23:13.300 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_0)'
2023-02-02 09:23:13.331 -07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-02-02 09:23:13.332 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 09:23:13.332 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 09:23:13.332 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:23:13.332 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:23:13.332 -07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_0 OFFSET @__p_0
2023-02-02 09:23:13.332 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_0 OFFSET @__p_0
2023-02-02 09:23:13.332 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 09:23:13.332 -07:00 [DBG] A data reader was disposed.
2023-02-02 09:23:13.332 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:23:13.332 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:23:13.333 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 09:23:13.333 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 09:23:13.333 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 09:23:13.333 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 09:23:13.333 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 09:23:13.333 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 09:23:13.333 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 45.0037ms
2023-02-02 09:23:13.333 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:23:13.333 -07:00 [DBG] Connection id "0HMO5770L1CKD" completed keep alive response.
2023-02-02 09:23:13.333 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 09:23:13.333 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities?pageSize=1&pageNumber=2 - - - 200 77 application/json;+charset=utf-8 52.8076ms
2023-02-02 09:23:55.349 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities?pageSize=2&pageNumber=2 - -
2023-02-02 09:23:55.350 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-02-02 09:23:55.350 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-02-02 09:23:55.350 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:23:55.360 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 09:23:55.387 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:23:55.439 -07:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 09:23:55.439 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 09:23:55.439 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 09:23:55.439 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 09:23:55.439 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 09:23:55.439 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 09:23:55.439 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:23:55.441 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:23:55.441 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-02-02 09:23:55.441 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-02-02 09:23:55.441 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-02-02 09:23:55.441 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:23:55.441 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:23:55.441 -07:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-02-02 09:23:55.441 -07:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-02-02 09:23:55.441 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:23:55.441 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-02-02 09:23:55.441 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:23:55.441 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:23:55.441 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:23:55.441 -07:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:23:55.441 -07:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:23:55.441 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 09:23:55.441 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2023-02-02 09:23:55.441 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:23:55.441 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:23:55.441 -07:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 09:23:55.441 -07:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:23:55.441 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 09:23:55.441 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2023-02-02 09:23:55.441 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:23:55.441 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:23:55.441 -07:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 09:23:55.441 -07:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:23:55.465 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 09:23:55.468 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 09:23:55.468 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 09:23:55.468 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:23:55.468 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:23:55.468 -07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_0 OFFSET @__p_0
2023-02-02 09:23:55.468 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_0 OFFSET @__p_0
2023-02-02 09:23:55.468 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 09:23:55.468 -07:00 [DBG] A data reader was disposed.
2023-02-02 09:23:55.468 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:23:55.468 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:23:55.468 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 09:23:55.468 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 09:23:55.468 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 09:23:55.468 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 09:23:55.468 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 09:23:55.468 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 09:23:55.469 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 29.1592ms
2023-02-02 09:23:55.469 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:23:55.469 -07:00 [DBG] Connection id "0HMO5770L1CKD" completed keep alive response.
2023-02-02 09:23:55.469 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 09:23:55.469 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities?pageSize=2&pageNumber=2 - - - 200 70 application/json;+charset=utf-8 119.8101ms
2023-02-02 09:24:00.881 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities?pageSize=2&pageNumber=1 - -
2023-02-02 09:24:00.881 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-02-02 09:24:00.881 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-02-02 09:24:00.881 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:24:00.881 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 09:24:00.881 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:24:00.881 -07:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 09:24:00.882 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 09:24:00.883 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 09:24:00.883 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 09:24:00.883 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 09:24:00.883 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 09:24:00.883 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:24:00.883 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:24:00.883 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-02-02 09:24:00.883 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-02-02 09:24:00.883 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-02-02 09:24:00.883 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:24:00.883 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:24:00.883 -07:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-02-02 09:24:00.883 -07:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-02-02 09:24:00.883 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:24:00.883 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-02-02 09:24:00.884 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:24:00.884 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:24:00.884 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:24:00.885 -07:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:24:00.885 -07:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:24:00.885 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 09:24:00.885 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2023-02-02 09:24:00.885 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:24:00.886 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:24:00.886 -07:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 09:24:00.886 -07:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:24:00.886 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 09:24:00.886 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2023-02-02 09:24:00.886 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:24:00.886 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:24:00.886 -07:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 09:24:00.886 -07:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:24:00.888 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 09:24:00.889 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 09:24:00.889 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 09:24:00.889 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:24:00.889 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:24:00.889 -07:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2023-02-02 09:24:00.890 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2023-02-02 09:24:00.890 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 09:24:00.890 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 09:24:00.890 -07:00 [DBG] A data reader was disposed.
2023-02-02 09:24:00.890 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:24:00.890 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:24:00.890 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 09:24:00.890 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 09:24:00.890 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 09:24:00.890 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 09:24:00.890 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 09:24:00.894 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 09:24:00.894 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 11.6345ms
2023-02-02 09:24:00.894 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:24:00.895 -07:00 [DBG] Connection id "0HMO5770L1CKD" completed keep alive response.
2023-02-02 09:24:00.895 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 09:24:00.895 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities?pageSize=2&pageNumber=1 - - - 200 178 application/json;+charset=utf-8 13.8176ms
2023-02-02 09:24:06.499 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities?pageSize=1&pageNumber=2 - -
2023-02-02 09:24:06.500 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-02-02 09:24:06.500 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-02-02 09:24:06.500 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:24:06.500 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 09:24:06.500 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:24:06.500 -07:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 09:24:06.500 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 09:24:06.500 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 09:24:06.500 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 09:24:06.500 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 09:24:06.500 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 09:24:06.501 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:24:06.501 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:24:06.501 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-02-02 09:24:06.501 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-02-02 09:24:06.501 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-02-02 09:24:06.501 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:24:06.501 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:24:06.501 -07:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-02-02 09:24:06.501 -07:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-02-02 09:24:06.501 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:24:06.501 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-02-02 09:24:06.501 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:24:06.501 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:24:06.501 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:24:06.501 -07:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:24:06.501 -07:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:24:06.501 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 09:24:06.501 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2023-02-02 09:24:06.501 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:24:06.501 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:24:06.501 -07:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 09:24:06.502 -07:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:24:06.502 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 09:24:06.502 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2023-02-02 09:24:06.502 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:24:06.502 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:24:06.502 -07:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 09:24:06.502 -07:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:24:06.503 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 09:24:06.504 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 09:24:06.504 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 09:24:06.504 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:24:06.504 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:24:06.504 -07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_0 OFFSET @__p_0
2023-02-02 09:24:06.504 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_0 OFFSET @__p_0
2023-02-02 09:24:06.504 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 09:24:06.504 -07:00 [DBG] A data reader was disposed.
2023-02-02 09:24:06.505 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:24:06.505 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:24:06.505 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 09:24:06.505 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 09:24:06.505 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 09:24:06.505 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 09:24:06.505 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 09:24:06.505 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 09:24:06.505 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 4.6176ms
2023-02-02 09:24:06.505 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:24:06.505 -07:00 [DBG] Connection id "0HMO5770L1CKD" completed keep alive response.
2023-02-02 09:24:06.505 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 09:24:06.505 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities?pageSize=1&pageNumber=2 - - - 200 77 application/json;+charset=utf-8 6.1492ms
2023-02-02 09:33:12.752 -07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-02-02 09:33:12.913 -07:00 [DBG] Hosting starting
2023-02-02 09:33:13.103 -07:00 [DBG] Using development certificate: CN=localhost (Thumbprint: DF901BD9753E125923C6593F672F66E5F7B6BAB5)
2023-02-02 09:33:13.142 -07:00 [INF] Now listening on: https://localhost:7151
2023-02-02 09:33:13.142 -07:00 [INF] Now listening on: http://localhost:5197
2023-02-02 09:33:13.142 -07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-02-02 09:33:13.142 -07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-02-02 09:33:13.142 -07:00 [INF] Hosting environment: Development
2023-02-02 09:33:13.142 -07:00 [INF] Content root path: /Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/
2023-02-02 09:33:13.143 -07:00 [DBG] Hosting started
2023-02-02 09:33:16.499 -07:00 [DBG] Connection id "0HMO57CNRJBQT" accepted.
2023-02-02 09:33:16.500 -07:00 [DBG] Connection id "0HMO57CNRJBQT" started.
2023-02-02 09:33:16.576 -07:00 [DBG] Connection 0HMO57CNRJBQT established using the following protocol: "Tls12"
2023-02-02 09:33:16.619 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities?pageSize=1&pageNumber=2 - -
2023-02-02 09:33:16.623 -07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-02-02 09:33:16.670 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-02-02 09:33:16.673 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-02-02 09:33:16.674 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:33:16.710 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 09:33:16.714 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:33:16.750 -07:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 09:33:16.751 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 09:33:16.751 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 09:33:16.752 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 09:33:16.753 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 09:33:16.753 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 09:33:16.756 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:33:16.832 -07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-02-02 09:33:16.925 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:33:16.938 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-02-02 09:33:16.940 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-02-02 09:33:16.941 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-02-02 09:33:16.942 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:33:16.942 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:33:16.942 -07:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-02-02 09:33:16.946 -07:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-02-02 09:33:16.946 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:33:16.946 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-02-02 09:33:16.946 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:33:16.946 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:33:16.946 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:33:16.946 -07:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:33:16.946 -07:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:33:16.946 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 09:33:16.946 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2023-02-02 09:33:16.948 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:33:16.948 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:33:16.948 -07:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 09:33:16.953 -07:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:33:16.953 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 09:33:16.953 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2023-02-02 09:33:16.953 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:33:16.953 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:33:16.953 -07:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 09:33:16.953 -07:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:33:17.368 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 09:33:17.385 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2023-02-02 09:33:17.468 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 09:33:17.487 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 09:33:17.537 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (49ms).
2023-02-02 09:33:17.539 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:33:17.550 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:33:17.556 -07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2023-02-02 09:33:17.573 -07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2023-02-02 09:33:17.577 -07:00 [DBG] A data reader was disposed.
2023-02-02 09:33:17.579 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:33:17.582 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:33:17.588 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_0)'
2023-02-02 09:33:17.626 -07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-02-02 09:33:17.630 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 09:33:17.630 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 09:33:17.631 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:33:17.631 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:33:17.632 -07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_0 OFFSET @__p_0
2023-02-02 09:33:17.634 -07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_0 OFFSET @__p_0
2023-02-02 09:33:17.641 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 09:33:17.650 -07:00 [DBG] A data reader was disposed.
2023-02-02 09:33:17.651 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:33:17.651 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:33:17.697 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 09:33:17.703 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 09:33:17.703 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 09:33:17.703 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 09:33:17.707 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 09:33:17.707 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 09:33:17.802 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 1046.3856ms
2023-02-02 09:33:17.804 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:33:17.805 -07:00 [DBG] Connection id "0HMO57CNRJBQT" completed keep alive response.
2023-02-02 09:33:17.808 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 09:33:17.811 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities?pageSize=1&pageNumber=2 - - - 200 77 application/json;+charset=utf-8 1192.8945ms
2023-02-02 09:33:30.836 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities?pageSize=2&pageNumber=2 - -
2023-02-02 09:33:30.838 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-02-02 09:33:30.838 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-02-02 09:33:30.838 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:33:30.840 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 09:33:30.840 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:33:30.842 -07:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 09:33:30.842 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 09:33:30.842 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 09:33:30.843 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 09:33:30.843 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 09:33:30.843 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 09:33:30.843 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:33:30.844 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 09:33:30.844 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-02-02 09:33:30.844 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-02-02 09:33:30.845 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-02-02 09:33:30.845 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:33:30.845 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 09:33:30.845 -07:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-02-02 09:33:30.845 -07:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-02-02 09:33:30.845 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:33:30.845 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-02-02 09:33:30.845 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:33:30.845 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:33:30.845 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:33:30.845 -07:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-02-02 09:33:30.846 -07:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-02-02 09:33:30.846 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 09:33:30.846 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2023-02-02 09:33:30.846 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:33:30.846 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:33:30.846 -07:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 09:33:30.846 -07:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 09:33:30.846 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 09:33:30.846 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2023-02-02 09:33:30.846 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:33:30.846 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:33:30.846 -07:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 09:33:30.846 -07:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-02-02 09:33:30.907 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 09:33:30.956 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 09:33:30.956 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 09:33:30.956 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:33:30.956 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:33:30.956 -07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2023-02-02 09:33:30.957 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2023-02-02 09:33:30.957 -07:00 [DBG] A data reader was disposed.
2023-02-02 09:33:30.957 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:33:30.957 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:33:30.958 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 09:33:30.958 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 09:33:30.958 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:33:30.958 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:33:30.958 -07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_0 OFFSET @__p_0
2023-02-02 09:33:30.958 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_0 OFFSET @__p_0
2023-02-02 09:33:30.958 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 09:33:30.958 -07:00 [DBG] A data reader was disposed.
2023-02-02 09:33:30.958 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 09:33:30.958 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 09:33:30.959 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 09:33:30.959 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 09:33:30.959 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 09:33:30.959 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 09:33:30.959 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 09:33:30.959 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 09:33:30.959 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 116.1642ms
2023-02-02 09:33:30.959 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 09:33:30.959 -07:00 [DBG] Connection id "0HMO57CNRJBQT" completed keep alive response.
2023-02-02 09:33:30.959 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 09:33:30.959 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities?pageSize=2&pageNumber=2 - - - 200 70 application/json;+charset=utf-8 123.1617ms
2023-02-02 10:04:38.356 -07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-02-02 10:04:38.517 -07:00 [DBG] Hosting starting
2023-02-02 10:04:38.703 -07:00 [DBG] Using development certificate: CN=localhost (Thumbprint: DF901BD9753E125923C6593F672F66E5F7B6BAB5)
2023-02-02 10:04:38.790 -07:00 [INF] Now listening on: https://localhost:7151
2023-02-02 10:04:38.790 -07:00 [INF] Now listening on: http://localhost:5197
2023-02-02 10:04:38.790 -07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-02-02 10:04:38.790 -07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-02-02 10:04:38.791 -07:00 [INF] Hosting environment: Development
2023-02-02 10:04:38.791 -07:00 [INF] Content root path: /Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/
2023-02-02 10:04:38.791 -07:00 [DBG] Hosting started
2023-02-02 10:04:44.150 -07:00 [DBG] Connection id "0HMO57UADKOGR" accepted.
2023-02-02 10:04:44.151 -07:00 [DBG] Connection id "0HMO57UADKOGR" started.
2023-02-02 10:04:44.239 -07:00 [DBG] Connection 0HMO57UADKOGR established using the following protocol: "Tls12"
2023-02-02 10:04:44.284 -07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7151/api/authentication/authenticate application/json 111
2023-02-02 10:04:44.288 -07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-02-02 10:04:44.332 -07:00 [DBG] No candidates found for the request path '/api/authentication/authenticate'
2023-02-02 10:04:44.332 -07:00 [DBG] Request did not match any endpoints
2023-02-02 10:04:44.344 -07:00 [DBG] POST requests are not supported
2023-02-02 10:04:44.361 -07:00 [DBG] Connection id "0HMO57UADKOGR" completed keep alive response.
2023-02-02 10:04:44.365 -07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7151/api/authentication/authenticate application/json 111 - 404 0 - 81.6780ms
2023-02-02 10:04:44.366 -07:00 [DBG] Connection id "0HMO57UADKOGR", Request id "0HMO57UADKOGR:00000002": started reading request body.
2023-02-02 10:04:44.367 -07:00 [DBG] Connection id "0HMO57UADKOGR", Request id "0HMO57UADKOGR:00000002": done reading request body.
2023-02-02 10:05:09.372 -07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-02-02 10:05:09.526 -07:00 [DBG] Hosting starting
2023-02-02 10:05:09.690 -07:00 [DBG] Using development certificate: CN=localhost (Thumbprint: DF901BD9753E125923C6593F672F66E5F7B6BAB5)
2023-02-02 10:05:09.794 -07:00 [INF] Now listening on: https://localhost:7151
2023-02-02 10:05:09.794 -07:00 [INF] Now listening on: http://localhost:5197
2023-02-02 10:05:09.794 -07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-02-02 10:05:09.795 -07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-02-02 10:05:09.795 -07:00 [INF] Hosting environment: Development
2023-02-02 10:05:09.795 -07:00 [INF] Content root path: /Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/
2023-02-02 10:05:09.795 -07:00 [DBG] Hosting started
2023-02-02 10:05:13.424 -07:00 [DBG] Connection id "0HMO57UJ4PIUT" accepted.
2023-02-02 10:05:13.426 -07:00 [DBG] Connection id "0HMO57UJ4PIUT" started.
2023-02-02 10:05:13.499 -07:00 [DBG] Connection 0HMO57UJ4PIUT established using the following protocol: "Tls12"
2023-02-02 10:05:13.542 -07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7151/api/authentication/authenticate application/json 111
2023-02-02 10:05:13.546 -07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-02-02 10:05:13.592 -07:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-02-02 10:05:13.594 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-02-02 10:05:13.595 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-02-02 10:05:13.605 -07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-02-02 10:05:13.609 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-02-02 10:05:13.633 -07:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-02-02 10:05:13.634 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 10:05:13.634 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 10:05:13.635 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 10:05:13.635 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 10:05:13.636 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 10:05:13.639 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-02-02 10:05:13.640 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-02-02 10:05:13.648 -07:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-02-02 10:05:13.652 -07:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-02-02 10:05:13.652 -07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-02-02 10:05:13.657 -07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-02-02 10:05:13.669 -07:00 [DBG] Connection id "0HMO57UJ4PIUT", Request id "0HMO57UJ4PIUT:00000002": started reading request body.
2023-02-02 10:05:13.669 -07:00 [DBG] Connection id "0HMO57UJ4PIUT", Request id "0HMO57UJ4PIUT:00000002": done reading request body.
2023-02-02 10:05:13.748 -07:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-02-02 10:05:13.748 -07:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-02-02 10:05:13.748 -07:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-02-02 10:05:13.763 -07:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-02-02 10:05:13.835 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 10:05:13.839 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 10:05:13.839 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 10:05:13.839 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 10:05:13.844 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2023-02-02 10:05:13.844 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-02-02 10:05:13.865 -07:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 227.3361ms
2023-02-02 10:05:13.868 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-02-02 10:05:13.868 -07:00 [DBG] Connection id "0HMO57UJ4PIUT" completed keep alive response.
2023-02-02 10:05:13.872 -07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7151/api/authentication/authenticate application/json 111 - 200 - text/plain;+charset=utf-8 332.1172ms
2023-02-02 10:14:32.346 -07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-02-02 10:14:32.518 -07:00 [DBG] Hosting starting
2023-02-02 10:14:32.536 -07:00 [INF] User profile is available. Using '/Users/plamb/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2023-02-02 10:14:32.545 -07:00 [DBG] Repository contains no viable default key. Caller should generate a key with immediate activation.
2023-02-02 10:14:32.545 -07:00 [DBG] Policy resolution states that a new key should be added to the key ring.
2023-02-02 10:14:32.548 -07:00 [INF] Creating key {7aa011d6-5da2-4751-959a-e77ccbfb96c9} with creation date 2023-02-02 17:14:32Z, activation date 2023-02-02 17:14:32Z, and expiration date 2023-05-03 17:14:32Z.
2023-02-02 10:14:32.562 -07:00 [DBG] Descriptor deserializer type for key {7aa011d6-5da2-4751-959a-e77ccbfb96c9} is 'Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'.
2023-02-02 10:14:32.565 -07:00 [DBG] No key escrow sink found. Not writing key {7aa011d6-5da2-4751-959a-e77ccbfb96c9} to escrow.
2023-02-02 10:14:32.565 -07:00 [WRN] No XML encryptor configured. Key {7aa011d6-5da2-4751-959a-e77ccbfb96c9} may be persisted to storage in unencrypted form.
2023-02-02 10:14:32.582 -07:00 [INF] Writing data to file '/Users/plamb/.aspnet/DataProtection-Keys/key-7aa011d6-5da2-4751-959a-e77ccbfb96c9.xml'.
2023-02-02 10:14:32.583 -07:00 [DBG] Key cache expiration token triggered by 'CreateNewKey' operation.
2023-02-02 10:14:32.584 -07:00 [DBG] Reading data from file '/Users/plamb/.aspnet/DataProtection-Keys/key-7aa011d6-5da2-4751-959a-e77ccbfb96c9.xml'.
2023-02-02 10:14:32.620 -07:00 [DBG] Found key {7aa011d6-5da2-4751-959a-e77ccbfb96c9}.
2023-02-02 10:14:32.626 -07:00 [DBG] Considering key {7aa011d6-5da2-4751-959a-e77ccbfb96c9} with expiration date 2023-05-03 17:14:32Z as default key.
2023-02-02 10:14:32.630 -07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-02-02 10:14:32.636 -07:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2023-02-02 10:14:32.636 -07:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2023-02-02 10:14:32.644 -07:00 [DBG] Using key {7aa011d6-5da2-4751-959a-e77ccbfb96c9} as the default key.
2023-02-02 10:14:32.644 -07:00 [DBG] Key ring with default key {7aa011d6-5da2-4751-959a-e77ccbfb96c9} was loaded during application startup.
2023-02-02 10:14:32.837 -07:00 [DBG] Using development certificate: CN=localhost (Thumbprint: DF901BD9753E125923C6593F672F66E5F7B6BAB5)
2023-02-02 10:14:32.944 -07:00 [INF] Now listening on: https://localhost:7151
2023-02-02 10:14:32.944 -07:00 [INF] Now listening on: http://localhost:5197
2023-02-02 10:14:32.944 -07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-02-02 10:14:32.944 -07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-02-02 10:14:32.944 -07:00 [INF] Hosting environment: Development
2023-02-02 10:14:32.944 -07:00 [INF] Content root path: /Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/
2023-02-02 10:14:32.944 -07:00 [DBG] Hosting started
2023-02-02 10:14:54.043 -07:00 [DBG] Connection id "0HMO584061C1F" accepted.
2023-02-02 10:14:54.045 -07:00 [DBG] Connection id "0HMO584061C1F" started.
2023-02-02 10:14:54.122 -07:00 [DBG] Connection 0HMO584061C1F established using the following protocol: "Tls12"
2023-02-02 10:14:54.165 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities - -
2023-02-02 10:14:54.167 -07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-02-02 10:14:54.203 -07:00 [DBG] The request path  does not match the path filter
2023-02-02 10:14:54.247 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-02-02 10:14:54.250 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-02-02 10:14:54.251 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 10:14:54.306 -07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-02-02 10:14:54.320 -07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-02-02 10:14:54.328 -07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-02-02 10:14:54.341 -07:00 [DBG] Connection id "0HMO584061C1F" completed keep alive response.
2023-02-02 10:14:54.346 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities - - - 401 0 - 181.2622ms
2023-02-02 10:15:10.124 -07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7151/api/authentication/authenticate application/json 111
2023-02-02 10:15:10.125 -07:00 [DBG] POST requests are not supported
2023-02-02 10:15:10.125 -07:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-02-02 10:15:10.125 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-02-02 10:15:10.125 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-02-02 10:15:10.127 -07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-02-02 10:15:10.127 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-02-02 10:15:10.159 -07:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-02-02 10:15:10.160 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 10:15:10.160 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 10:15:10.162 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 10:15:10.162 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 10:15:10.162 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 10:15:10.166 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-02-02 10:15:10.167 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-02-02 10:15:10.175 -07:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-02-02 10:15:10.179 -07:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-02-02 10:15:10.180 -07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-02-02 10:15:10.185 -07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-02-02 10:15:10.199 -07:00 [DBG] Connection id "0HMO584061C1F", Request id "0HMO584061C1F:00000003": started reading request body.
2023-02-02 10:15:10.199 -07:00 [DBG] Connection id "0HMO584061C1F", Request id "0HMO584061C1F:00000003": done reading request body.
2023-02-02 10:15:10.268 -07:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-02-02 10:15:10.268 -07:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-02-02 10:15:10.268 -07:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-02-02 10:15:10.283 -07:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-02-02 10:15:10.339 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 10:15:10.342 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 10:15:10.342 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 10:15:10.342 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 10:15:10.346 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2023-02-02 10:15:10.346 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-02-02 10:15:10.355 -07:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 190.3634ms
2023-02-02 10:15:10.357 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-02-02 10:15:10.357 -07:00 [DBG] Connection id "0HMO584061C1F" completed keep alive response.
2023-02-02 10:15:10.357 -07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7151/api/authentication/authenticate application/json 111 - 200 - text/plain;+charset=utf-8 233.0412ms
2023-02-02 10:15:21.717 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities - -
2023-02-02 10:15:21.720 -07:00 [DBG] The request path  does not match the path filter
2023-02-02 10:15:21.720 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-02-02 10:15:21.720 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-02-02 10:15:21.720 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 10:15:21.770 -07:00 [DBG] Successfully validated the token.
2023-02-02 10:15:21.772 -07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-02-02 10:15:21.773 -07:00 [DBG] Authorization was successful.
2023-02-02 10:15:21.773 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 10:15:21.784 -07:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 10:15:21.785 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 10:15:21.785 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 10:15:21.785 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 10:15:21.785 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 10:15:21.785 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 10:15:21.785 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 10:15:21.846 -07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-02-02 10:15:21.935 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 10:15:21.935 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-02-02 10:15:21.936 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-02-02 10:15:21.937 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-02-02 10:15:21.937 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 10:15:21.937 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 10:15:21.937 -07:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-02-02 10:15:21.937 -07:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-02-02 10:15:21.938 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-02-02 10:15:21.938 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-02-02 10:15:21.938 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-02-02 10:15:21.938 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 10:15:21.938 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 10:15:21.938 -07:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-02-02 10:15:21.938 -07:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-02-02 10:15:21.938 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 10:15:21.938 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2023-02-02 10:15:21.938 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 10:15:21.938 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 10:15:21.938 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 10:15:21.938 -07:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 10:15:21.938 -07:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 10:15:21.938 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 10:15:21.938 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2023-02-02 10:15:21.938 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2023-02-02 10:15:21.938 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 10:15:21.938 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 10:15:21.938 -07:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 10:15:21.938 -07:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-02-02 10:15:22.328 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 10:15:22.344 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2023-02-02 10:15:22.421 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 10:15:22.440 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 10:15:23.017 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (576ms).
2023-02-02 10:15:23.019 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:15:23.031 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:15:23.036 -07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2023-02-02 10:15:23.050 -07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2023-02-02 10:15:23.053 -07:00 [DBG] A data reader was disposed.
2023-02-02 10:15:23.055 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:15:23.057 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:15:23.063 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2023-02-02 10:15:23.101 -07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-02-02 10:15:23.105 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 10:15:23.106 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 10:15:23.106 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:15:23.106 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:15:23.108 -07:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2023-02-02 10:15:23.109 -07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2023-02-02 10:15:23.116 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 10:15:23.125 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 10:15:23.126 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 10:15:23.126 -07:00 [DBG] A data reader was disposed.
2023-02-02 10:15:23.126 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:15:23.126 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:15:23.167 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 10:15:23.167 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 10:15:23.167 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 10:15:23.167 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 10:15:23.167 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 10:15:23.167 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 10:15:23.194 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 1409.438ms
2023-02-02 10:15:23.194 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 10:15:23.194 -07:00 [DBG] Connection id "0HMO584061C1F" completed keep alive response.
2023-02-02 10:15:23.195 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 10:15:23.196 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities - - - 200 247 application/json;+charset=utf-8 1480.1741ms
2023-02-02 10:22:53.980 -07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-02-02 10:22:54.153 -07:00 [DBG] Hosting starting
2023-02-02 10:22:54.173 -07:00 [INF] User profile is available. Using '/Users/plamb/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2023-02-02 10:22:54.179 -07:00 [DBG] Reading data from file '/Users/plamb/.aspnet/DataProtection-Keys/key-7aa011d6-5da2-4751-959a-e77ccbfb96c9.xml'.
2023-02-02 10:22:54.223 -07:00 [DBG] Found key {7aa011d6-5da2-4751-959a-e77ccbfb96c9}.
2023-02-02 10:22:54.243 -07:00 [DBG] Considering key {7aa011d6-5da2-4751-959a-e77ccbfb96c9} with expiration date 2023-05-03 17:14:32Z as default key.
2023-02-02 10:22:54.248 -07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-02-02 10:22:54.257 -07:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2023-02-02 10:22:54.257 -07:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2023-02-02 10:22:54.265 -07:00 [DBG] Using key {7aa011d6-5da2-4751-959a-e77ccbfb96c9} as the default key.
2023-02-02 10:22:54.266 -07:00 [DBG] Key ring with default key {7aa011d6-5da2-4751-959a-e77ccbfb96c9} was loaded during application startup.
2023-02-02 10:22:54.441 -07:00 [DBG] Using development certificate: CN=localhost (Thumbprint: DF901BD9753E125923C6593F672F66E5F7B6BAB5)
2023-02-02 10:22:54.523 -07:00 [INF] Now listening on: https://localhost:7151
2023-02-02 10:22:54.523 -07:00 [INF] Now listening on: http://localhost:5197
2023-02-02 10:22:54.523 -07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-02-02 10:22:54.523 -07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-02-02 10:22:54.523 -07:00 [INF] Hosting environment: Development
2023-02-02 10:22:54.523 -07:00 [INF] Content root path: /Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/
2023-02-02 10:22:54.523 -07:00 [DBG] Hosting started
2023-02-02 10:22:55.389 -07:00 [DBG] Connection id "0HMO588FKFR9H" accepted.
2023-02-02 10:22:55.391 -07:00 [DBG] Connection id "0HMO588FKFR9H" started.
2023-02-02 10:22:55.466 -07:00 [DBG] Connection 0HMO588FKFR9H established using the following protocol: "Tls12"
2023-02-02 10:22:55.508 -07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7151/api/authentication/authenticate application/json 111
2023-02-02 10:22:55.512 -07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-02-02 10:22:55.521 -07:00 [DBG] POST requests are not supported
2023-02-02 10:22:55.567 -07:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-02-02 10:22:55.570 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-02-02 10:22:55.570 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-02-02 10:22:55.606 -07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-02-02 10:22:55.610 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-02-02 10:22:55.636 -07:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-02-02 10:22:55.637 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 10:22:55.637 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 10:22:55.639 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 10:22:55.639 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 10:22:55.639 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 10:22:55.643 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-02-02 10:22:55.643 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-02-02 10:22:55.652 -07:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-02-02 10:22:55.655 -07:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-02-02 10:22:55.656 -07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-02-02 10:22:55.661 -07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-02-02 10:22:55.673 -07:00 [DBG] Connection id "0HMO588FKFR9H", Request id "0HMO588FKFR9H:00000002": started reading request body.
2023-02-02 10:22:55.673 -07:00 [DBG] Connection id "0HMO588FKFR9H", Request id "0HMO588FKFR9H:00000002": done reading request body.
2023-02-02 10:22:55.753 -07:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-02-02 10:22:55.754 -07:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-02-02 10:22:55.754 -07:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-02-02 10:22:55.769 -07:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-02-02 10:22:55.826 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 10:22:55.829 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 10:22:55.829 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 10:22:55.829 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 10:22:55.833 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2023-02-02 10:22:55.834 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-02-02 10:22:55.855 -07:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 213.6695ms
2023-02-02 10:22:55.858 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-02-02 10:22:55.859 -07:00 [DBG] Connection id "0HMO588FKFR9H" completed keep alive response.
2023-02-02 10:22:55.862 -07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7151/api/authentication/authenticate application/json 111 - 200 - text/plain;+charset=utf-8 355.7981ms
2023-02-02 10:23:08.849 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities/1/pointsofinterest/1 - -
2023-02-02 10:23:08.877 -07:00 [DBG] The request path  does not match the path filter
2023-02-02 10:23:08.877 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2023-02-02 10:23:08.878 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2023-02-02 10:23:08.878 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-02-02 10:23:08.917 -07:00 [DBG] Successfully validated the token.
2023-02-02 10:23:08.919 -07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-02-02 10:23:08.927 -07:00 [DBG] Authorization was successful.
2023-02-02 10:23:08.929 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-02-02 10:23:08.939 -07:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-02-02 10:23:08.939 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 10:23:08.939 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 10:23:08.939 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 10:23:08.939 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 10:23:08.939 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 10:23:08.939 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 10:23:09.008 -07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-02-02 10:23:09.096 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 10:23:09.096 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-02-02 10:23:09.097 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-02-02 10:23:09.100 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 10:23:09.100 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 10:23:09.100 -07:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-02-02 10:23:09.100 -07:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-02-02 10:23:09.100 -07:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-02-02 10:23:09.100 -07:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-02-02 10:23:09.100 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-02-02 10:23:09.100 -07:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-02-02 10:23:09.100 -07:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-02-02 10:23:09.100 -07:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-02-02 10:23:09.514 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 10:23:09.535 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-02-02 10:23:09.639 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 10:23:09.660 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 10:23:09.713 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (52ms).
2023-02-02 10:23:09.717 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:23:09.734 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:23:09.745 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 10:23:09.767 -07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 10:23:09.770 -07:00 [DBG] A data reader was disposed.
2023-02-02 10:23:09.772 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:23:09.774 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:23:09.777 -07:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0 && p.Id == __pointOfInterestId_1)
    .FirstOrDefault()'
2023-02-02 10:23:09.806 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityId_0) && (p.Id == @__pointOfInterestId_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 10:23:09.813 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 10:23:09.813 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 10:23:09.813 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:23:09.813 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:23:09.813 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-02-02 10:23:09.816 -07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-02-02 10:23:09.822 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 10:23:09.834 -07:00 [DBG] A data reader was disposed.
2023-02-02 10:23:09.834 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:23:09.834 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:23:09.843 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 10:23:09.843 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 10:23:09.843 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 10:23:09.843 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 10:23:09.843 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 10:23:09.843 -07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2023-02-02 10:23:09.867 -07:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 927.17ms
2023-02-02 10:23:09.867 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-02-02 10:23:09.867 -07:00 [DBG] Connection id "0HMO588FKFR9H" completed keep alive response.
2023-02-02 10:23:09.867 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 10:23:09.868 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities/1/pointsofinterest/1 - - - 200 106 application/json;+charset=utf-8 1019.1627ms
2023-02-02 10:23:24.203 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities/1/pointsofinterest - -
2023-02-02 10:23:24.205 -07:00 [DBG] The request path  does not match the path filter
2023-02-02 10:23:24.205 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2023-02-02 10:23:24.205 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest'
2023-02-02 10:23:24.205 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-02-02 10:23:24.209 -07:00 [DBG] Successfully validated the token.
2023-02-02 10:23:24.209 -07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-02-02 10:23:24.210 -07:00 [DBG] Authorization was successful.
2023-02-02 10:23:24.210 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-02-02 10:23:24.216 -07:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-02-02 10:23:24.216 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 10:23:24.216 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 10:23:24.216 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 10:23:24.216 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 10:23:24.216 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 10:23:24.216 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 10:23:24.249 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 10:23:24.249 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-02-02 10:23:24.249 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-02-02 10:23:24.250 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 10:23:24.250 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 10:23:24.250 -07:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-02-02 10:23:24.298 -07:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-02-02 10:23:24.301 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 10:23:24.302 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2023-02-02 10:23:24.304 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 10:23:24.304 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 10:23:24.304 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 10:23:24.304 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:23:24.304 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:23:24.304 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-02-02 10:23:24.306 -07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-02-02 10:23:24.306 -07:00 [DBG] A data reader was disposed.
2023-02-02 10:23:24.306 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:23:24.306 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:23:24.309 -07:00 [INF] Executing ForbidResult with authentication schemes ([]).
2023-02-02 10:23:24.310 -07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-02-02 10:23:24.310 -07:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 94.4902ms
2023-02-02 10:23:24.311 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-02-02 10:23:24.311 -07:00 [DBG] Connection id "0HMO588FKFR9H" completed keep alive response.
2023-02-02 10:23:24.311 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 10:23:24.311 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities/1/pointsofinterest - - - 403 0 - 107.7846ms
2023-02-02 10:23:34.353 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities/2/pointsofinterest - -
2023-02-02 10:23:34.354 -07:00 [DBG] The request path  does not match the path filter
2023-02-02 10:23:34.354 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2023-02-02 10:23:34.354 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2023-02-02 10:23:34.354 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-02-02 10:23:34.354 -07:00 [DBG] Successfully validated the token.
2023-02-02 10:23:34.354 -07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-02-02 10:23:34.354 -07:00 [DBG] Authorization was successful.
2023-02-02 10:23:34.354 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-02-02 10:23:34.355 -07:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-02-02 10:23:34.355 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 10:23:34.355 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 10:23:34.355 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 10:23:34.355 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 10:23:34.355 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 10:23:34.355 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 10:23:34.356 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 10:23:34.356 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-02-02 10:23:34.356 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-02-02 10:23:34.356 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 10:23:34.356 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 10:23:34.356 -07:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-02-02 10:23:34.356 -07:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-02-02 10:23:34.380 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 10:23:34.382 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 10:23:34.382 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 10:23:34.382 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:23:34.382 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:23:34.382 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-02-02 10:23:34.382 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-02-02 10:23:34.382 -07:00 [DBG] A data reader was disposed.
2023-02-02 10:23:34.382 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:23:34.382 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:23:34.382 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 10:23:34.382 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 10:23:34.383 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:23:34.383 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:23:34.383 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 10:23:34.383 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 10:23:34.383 -07:00 [DBG] A data reader was disposed.
2023-02-02 10:23:34.383 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:23:34.383 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:23:34.386 -07:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2023-02-02 10:23:34.387 -07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-02-02 10:23:34.387 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 10:23:34.387 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 10:23:34.388 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:23:34.388 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:23:34.388 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-02-02 10:23:34.388 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-02-02 10:23:34.388 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 10:23:34.388 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 10:23:34.388 -07:00 [DBG] A data reader was disposed.
2023-02-02 10:23:34.388 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:23:34.388 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:23:34.400 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 10:23:34.400 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 10:23:34.400 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 10:23:34.400 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 10:23:34.400 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 10:23:34.400 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 10:23:34.406 -07:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 51.3246ms
2023-02-02 10:23:34.406 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-02-02 10:23:34.406 -07:00 [DBG] Connection id "0HMO588FKFR9H" completed keep alive response.
2023-02-02 10:23:34.406 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 10:23:34.406 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities/2/pointsofinterest - - - 200 238 application/json;+charset=utf-8 53.3825ms
2023-02-02 10:28:57.754 -07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-02-02 10:28:57.918 -07:00 [DBG] Hosting starting
2023-02-02 10:28:57.936 -07:00 [INF] User profile is available. Using '/Users/plamb/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2023-02-02 10:28:57.943 -07:00 [DBG] Reading data from file '/Users/plamb/.aspnet/DataProtection-Keys/key-7aa011d6-5da2-4751-959a-e77ccbfb96c9.xml'.
2023-02-02 10:28:57.985 -07:00 [DBG] Found key {7aa011d6-5da2-4751-959a-e77ccbfb96c9}.
2023-02-02 10:28:58.004 -07:00 [DBG] Considering key {7aa011d6-5da2-4751-959a-e77ccbfb96c9} with expiration date 2023-05-03 17:14:32Z as default key.
2023-02-02 10:28:58.009 -07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-02-02 10:28:58.017 -07:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2023-02-02 10:28:58.017 -07:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2023-02-02 10:28:58.024 -07:00 [DBG] Using key {7aa011d6-5da2-4751-959a-e77ccbfb96c9} as the default key.
2023-02-02 10:28:58.025 -07:00 [DBG] Key ring with default key {7aa011d6-5da2-4751-959a-e77ccbfb96c9} was loaded during application startup.
2023-02-02 10:28:58.199 -07:00 [DBG] Using development certificate: CN=localhost (Thumbprint: DF901BD9753E125923C6593F672F66E5F7B6BAB5)
2023-02-02 10:28:58.281 -07:00 [INF] Now listening on: https://localhost:7151
2023-02-02 10:28:58.281 -07:00 [INF] Now listening on: http://localhost:5197
2023-02-02 10:28:58.282 -07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-02-02 10:28:58.282 -07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-02-02 10:28:58.282 -07:00 [INF] Hosting environment: Development
2023-02-02 10:28:58.282 -07:00 [INF] Content root path: /Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/
2023-02-02 10:28:58.282 -07:00 [DBG] Hosting started
2023-02-02 10:29:00.108 -07:00 [DBG] Connection id "0HMO58BSANP9D" accepted.
2023-02-02 10:29:00.109 -07:00 [DBG] Connection id "0HMO58BSANP9D" started.
2023-02-02 10:29:00.195 -07:00 [DBG] Connection 0HMO58BSANP9D established using the following protocol: "Tls12"
2023-02-02 10:29:00.240 -07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7151/api/authentication/authenticate application/json 111
2023-02-02 10:29:00.244 -07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-02-02 10:29:00.254 -07:00 [DBG] POST requests are not supported
2023-02-02 10:29:00.299 -07:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-02-02 10:29:00.302 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-02-02 10:29:00.302 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-02-02 10:29:00.335 -07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-02-02 10:29:00.339 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-02-02 10:29:00.365 -07:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-02-02 10:29:00.365 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 10:29:00.366 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 10:29:00.367 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 10:29:00.367 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 10:29:00.367 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 10:29:00.371 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-02-02 10:29:00.372 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-02-02 10:29:00.381 -07:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-02-02 10:29:00.384 -07:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-02-02 10:29:00.385 -07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-02-02 10:29:00.390 -07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-02-02 10:29:00.401 -07:00 [DBG] Connection id "0HMO58BSANP9D", Request id "0HMO58BSANP9D:00000002": started reading request body.
2023-02-02 10:29:00.401 -07:00 [DBG] Connection id "0HMO58BSANP9D", Request id "0HMO58BSANP9D:00000002": done reading request body.
2023-02-02 10:29:00.479 -07:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-02-02 10:29:00.479 -07:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-02-02 10:29:00.479 -07:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-02-02 10:29:00.495 -07:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-02-02 10:29:00.549 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 10:29:00.553 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 10:29:00.553 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 10:29:00.553 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 10:29:00.557 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2023-02-02 10:29:00.558 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-02-02 10:29:00.578 -07:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 209.0241ms
2023-02-02 10:29:00.581 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-02-02 10:29:00.582 -07:00 [DBG] Connection id "0HMO58BSANP9D" completed keep alive response.
2023-02-02 10:29:00.585 -07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7151/api/authentication/authenticate application/json 111 - 200 - text/plain;+charset=utf-8 346.6061ms
2023-02-02 10:29:09.066 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities - -
2023-02-02 10:29:09.099 -07:00 [DBG] The request path  does not match the path filter
2023-02-02 10:29:09.099 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-02-02 10:29:09.100 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-02-02 10:29:09.100 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 10:29:09.140 -07:00 [DBG] Successfully validated the token.
2023-02-02 10:29:09.142 -07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-02-02 10:29:09.151 -07:00 [DBG] Authorization was successful.
2023-02-02 10:29:09.152 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 10:29:09.161 -07:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointsOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-02-02 10:29:09.161 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 10:29:09.161 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 10:29:09.161 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 10:29:09.161 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 10:29:09.161 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 10:29:09.161 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 10:29:09.218 -07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-02-02 10:29:09.300 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-02-02 10:29:09.300 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-02-02 10:29:09.301 -07:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-02-02 10:29:09.302 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-02-02 10:29:09.302 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 10:29:09.302 -07:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-02-02 10:29:09.302 -07:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-02-02 10:29:09.302 -07:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-02-02 10:29:09.302 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-02-02 10:29:09.302 -07:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-02-02 10:29:09.302 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-02-02 10:29:09.302 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 10:29:09.302 -07:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-02-02 10:29:09.302 -07:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-02-02 10:29:09.302 -07:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-02-02 10:29:09.302 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 10:29:09.302 -07:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2023-02-02 10:29:09.302 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 10:29:09.302 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 10:29:09.302 -07:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 10:29:09.302 -07:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-02-02 10:29:09.303 -07:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-02-02 10:29:09.303 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 10:29:09.303 -07:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2023-02-02 10:29:09.303 -07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2023-02-02 10:29:09.303 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 10:29:09.303 -07:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-02-02 10:29:09.303 -07:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-02-02 10:29:09.303 -07:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-02-02 10:29:09.687 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 10:29:09.703 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2023-02-02 10:29:09.782 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 10:29:09.797 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 10:29:09.867 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (68ms).
2023-02-02 10:29:09.870 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:29:09.880 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:29:09.886 -07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2023-02-02 10:29:09.899 -07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Cities" AS "c"
2023-02-02 10:29:09.902 -07:00 [DBG] A data reader was disposed.
2023-02-02 10:29:09.904 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:29:09.906 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:29:09.911 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2023-02-02 10:29:09.949 -07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-02-02 10:29:09.952 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 10:29:09.952 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 10:29:09.953 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:29:09.953 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:29:09.955 -07:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2023-02-02 10:29:09.957 -07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
LIMIT @__p_1 OFFSET @__p_0
2023-02-02 10:29:09.963 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 10:29:09.973 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 10:29:09.973 -07:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 10:29:09.974 -07:00 [DBG] A data reader was disposed.
2023-02-02 10:29:09.974 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:29:09.974 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:29:10.016 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 10:29:10.021 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 10:29:10.021 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 10:29:10.021 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 10:29:10.021 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 10:29:10.021 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointsOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 10:29:10.049 -07:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 887.071ms
2023-02-02 10:29:10.049 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-02-02 10:29:10.049 -07:00 [DBG] Connection id "0HMO58BSANP9D" completed keep alive response.
2023-02-02 10:29:10.050 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 10:29:10.050 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities - - - 200 247 application/json;+charset=utf-8 984.2210ms
2023-02-02 10:29:25.020 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities/2/pointsofinterest - -
2023-02-02 10:29:25.024 -07:00 [DBG] The request path  does not match the path filter
2023-02-02 10:29:25.025 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2023-02-02 10:29:25.026 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2023-02-02 10:29:25.026 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-02-02 10:29:25.031 -07:00 [DBG] Successfully validated the token.
2023-02-02 10:29:25.031 -07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-02-02 10:29:25.033 -07:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=city and Claim.Value is one of the following values: (Antwerp)
2023-02-02 10:29:25.035 -07:00 [INF] AuthenticationScheme: Bearer was forbidden.
2023-02-02 10:29:25.035 -07:00 [DBG] Connection id "0HMO58BSANP9D" completed keep alive response.
2023-02-02 10:29:25.035 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities/2/pointsofinterest - - - 403 0 - 14.4230ms
2023-02-02 10:29:46.793 -07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-02-02 10:29:46.962 -07:00 [DBG] Hosting starting
2023-02-02 10:29:46.987 -07:00 [INF] User profile is available. Using '/Users/plamb/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2023-02-02 10:29:46.994 -07:00 [DBG] Reading data from file '/Users/plamb/.aspnet/DataProtection-Keys/key-7aa011d6-5da2-4751-959a-e77ccbfb96c9.xml'.
2023-02-02 10:29:47.040 -07:00 [DBG] Found key {7aa011d6-5da2-4751-959a-e77ccbfb96c9}.
2023-02-02 10:29:47.061 -07:00 [DBG] Considering key {7aa011d6-5da2-4751-959a-e77ccbfb96c9} with expiration date 2023-05-03 17:14:32Z as default key.
2023-02-02 10:29:47.065 -07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-02-02 10:29:47.074 -07:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2023-02-02 10:29:47.075 -07:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2023-02-02 10:29:47.082 -07:00 [DBG] Using key {7aa011d6-5da2-4751-959a-e77ccbfb96c9} as the default key.
2023-02-02 10:29:47.083 -07:00 [DBG] Key ring with default key {7aa011d6-5da2-4751-959a-e77ccbfb96c9} was loaded during application startup.
2023-02-02 10:29:47.246 -07:00 [DBG] Using development certificate: CN=localhost (Thumbprint: DF901BD9753E125923C6593F672F66E5F7B6BAB5)
2023-02-02 10:29:47.377 -07:00 [INF] Now listening on: https://localhost:7151
2023-02-02 10:29:47.378 -07:00 [INF] Now listening on: http://localhost:5197
2023-02-02 10:29:47.378 -07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-02-02 10:29:47.378 -07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-02-02 10:29:47.378 -07:00 [INF] Hosting environment: Development
2023-02-02 10:29:47.378 -07:00 [INF] Content root path: /Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/
2023-02-02 10:29:47.378 -07:00 [DBG] Hosting started
2023-02-02 10:29:48.765 -07:00 [DBG] Connection id "0HMO58CAQOOKD" accepted.
2023-02-02 10:29:48.766 -07:00 [DBG] Connection id "0HMO58CAQOOKD" started.
2023-02-02 10:29:48.839 -07:00 [DBG] Connection 0HMO58CAQOOKD established using the following protocol: "Tls12"
2023-02-02 10:29:48.884 -07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7151/api/authentication/authenticate application/json 111
2023-02-02 10:29:48.888 -07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-02-02 10:29:48.897 -07:00 [DBG] POST requests are not supported
2023-02-02 10:29:48.942 -07:00 [DBG] 1 candidate(s) found for the request path '/api/authentication/authenticate'
2023-02-02 10:29:48.944 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)' with route pattern 'api/authentication/authenticate' is valid for the request path '/api/authentication/authenticate'
2023-02-02 10:29:48.945 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-02-02 10:29:48.977 -07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-02-02 10:29:48.981 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-02-02 10:29:49.006 -07:00 [INF] Route matched with {action = "Authenticate", controller = "Authentication"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] Authenticate(AuthenticationRequestBody) on controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API).
2023-02-02 10:29:49.007 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 10:29:49.007 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 10:29:49.009 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 10:29:49.009 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 10:29:49.009 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 10:29:49.014 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-02-02 10:29:49.016 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AuthenticationController (CityInfo.API)
2023-02-02 10:29:49.026 -07:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-02-02 10:29:49.031 -07:00 [DBG] Attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' using the name '' in request data ...
2023-02-02 10:29:49.031 -07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-02-02 10:29:49.036 -07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-02-02 10:29:49.049 -07:00 [DBG] Connection id "0HMO58CAQOOKD", Request id "0HMO58CAQOOKD:00000002": started reading request body.
2023-02-02 10:29:49.050 -07:00 [DBG] Connection id "0HMO58CAQOOKD", Request id "0HMO58CAQOOKD:00000002": done reading request body.
2023-02-02 10:29:49.122 -07:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-02-02 10:29:49.122 -07:00 [DBG] Done attempting to bind parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-02-02 10:29:49.122 -07:00 [DBG] Attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody' ...
2023-02-02 10:29:49.138 -07:00 [DBG] Done attempting to validate the bound parameter 'authenticationRequestBody' of type 'CityInfo.API.Controllers.AuthenticationController+AuthenticationRequestBody'.
2023-02-02 10:29:49.191 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 10:29:49.195 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 10:29:49.195 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 10:29:49.195 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 10:29:49.199 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2023-02-02 10:29:49.200 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-02-02 10:29:49.221 -07:00 [INF] Executed action CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API) in 209.8493ms
2023-02-02 10:29:49.224 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AuthenticationController.Authenticate (CityInfo.API)'
2023-02-02 10:29:49.225 -07:00 [DBG] Connection id "0HMO58CAQOOKD" completed keep alive response.
2023-02-02 10:29:49.228 -07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7151/api/authentication/authenticate application/json 111 - 200 - text/plain;+charset=utf-8 345.3586ms
2023-02-02 10:29:57.577 -07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7151/api/cities/2/pointsofinterest - -
2023-02-02 10:29:57.600 -07:00 [DBG] The request path  does not match the path filter
2023-02-02 10:29:57.600 -07:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointsofinterest'
2023-02-02 10:29:57.601 -07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityId}/pointsofinterest' is valid for the request path '/api/cities/2/pointsofinterest'
2023-02-02 10:29:57.601 -07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-02-02 10:29:57.642 -07:00 [DBG] Successfully validated the token.
2023-02-02 10:29:57.644 -07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-02-02 10:29:57.654 -07:00 [DBG] Authorization was successful.
2023-02-02 10:29:57.656 -07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-02-02 10:29:57.664 -07:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-02-02 10:29:57.664 -07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-02-02 10:29:57.664 -07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-02-02 10:29:57.664 -07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-02-02 10:29:57.664 -07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-02-02 10:29:57.664 -07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-02-02 10:29:57.664 -07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 10:29:57.717 -07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-02-02 10:29:57.799 -07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-02-02 10:29:57.799 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-02-02 10:29:57.800 -07:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-02-02 10:29:57.802 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 10:29:57.802 -07:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-02-02 10:29:57.802 -07:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-02-02 10:29:57.803 -07:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-02-02 10:29:58.174 -07:00 [INF] Entity Framework Core 6.0.13 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.13' with options: None
2023-02-02 10:29:58.195 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0 && c.Name == __cityName_1)'
2023-02-02 10:29:58.279 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE (c.Id == @__cityId_0) && (c.Name == @__cityName_1))), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 10:29:58.299 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 10:29:58.340 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (39ms).
2023-02-02 10:29:58.343 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:29:58.351 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:29:58.358 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-02-02 10:29:58.373 -07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__cityName_1='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE ("c"."Id" = @__cityId_0) AND ("c"."Name" = @__cityName_1))
2023-02-02 10:29:58.376 -07:00 [DBG] A data reader was disposed.
2023-02-02 10:29:58.378 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:29:58.381 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:29:58.382 -07:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-02-02 10:29:58.383 -07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-02-02 10:29:58.383 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 10:29:58.383 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 10:29:58.383 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:29:58.383 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:29:58.383 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 10:29:58.383 -07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-02-02 10:29:58.383 -07:00 [DBG] A data reader was disposed.
2023-02-02 10:29:58.384 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:29:58.384 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:29:58.387 -07:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2023-02-02 10:29:58.414 -07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-02-02 10:29:58.418 -07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-02-02 10:29:58.418 -07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-02-02 10:29:58.418 -07:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:29:58.418 -07:00 [DBG] Opened connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:29:58.418 -07:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-02-02 10:29:58.418 -07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-02-02 10:29:58.424 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 10:29:58.435 -07:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-02-02 10:29:58.435 -07:00 [DBG] A data reader was disposed.
2023-02-02 10:29:58.435 -07:00 [DBG] Closing connection to database 'main' on server '/Users/plamb/tutorials/c-sharp/dotnet-core-6-web-api-fundamentals/CityInfo.API/CityInfo.db'.
2023-02-02 10:29:58.435 -07:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-02-02 10:29:58.449 -07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-02-02 10:29:58.449 -07:00 [DBG] No information found on request to perform content negotiation.
2023-02-02 10:29:58.449 -07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-02-02 10:29:58.449 -07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-02-02 10:29:58.449 -07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-02-02 10:29:58.449 -07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-02 10:29:58.473 -07:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 808.5668ms
2023-02-02 10:29:58.473 -07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-02-02 10:29:58.473 -07:00 [DBG] Connection id "0HMO58CAQOOKD" completed keep alive response.
2023-02-02 10:29:58.474 -07:00 [DBG] 'CityInfoContext' disposed.
2023-02-02 10:29:58.474 -07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7151/api/cities/2/pointsofinterest - - - 200 238 application/json;+charset=utf-8 897.3820ms
